(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{960:(e,t,s)=>{"use strict";s.d(t,{TW:()=>o,UU:()=>n,dh:()=>a,g9:()=>i,jd:()=>c,jx:()=>l,mC:()=>m,saveJiraConfig:()=>u,zv:()=>d});var r=s(6648);async function a(){let{data:e,error:t}=await r.N.from("sources").select("*").order("created_at",{ascending:!0});return t?(console.error("Error fetching sources:",t),[]):e}async function n(e){for(let t of e)await r.N.from("sources").update({selected:t.selected}).eq("id",t.id);return e}async function i(e,t){let{data:{user:s}}=await r.N.auth.getUser();if(!s)throw Error("Not authenticated");let a={name:"".concat("play"===e?"Play Store":"App Store"," Reviews"),type:"reviews",selected:!0,meta:{store:e,url:t},user_id:s.id},{data:n,error:i}=await r.N.from("sources").insert(a).select().single();if(i)throw i;return n}async function l(e){let{data:{user:t}}=await r.N.auth.getUser();if(!t)throw Error("Not authenticated");let s=e.map(e=>({name:e.name,type:e.name.toLowerCase().endsWith(".pdf")?"pdf":"document",selected:!0,user_id:t.id})),{data:a,error:n}=await r.N.from("sources").insert(s).select();if(n)throw n;return a}async function o(e){let t=await fetch("/api/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sourceIds:e})});if(!t.ok)throw Error((await t.json()).message||"Analysis failed");return t.json()}async function d(e,t,s){let r=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e,sourceIds:t,history:s})});if(!r.ok)throw Error((await r.json()).message||"Chat failed");return r.json()}async function c(){let{data:e,error:t}=await r.N.from("jira_configs").select("*").single();return t&&"PGRST116"!==t.code?(console.error("Error fetching Jira config:",t),{configured:!1}):e?{...e,configured:!0,hasToken:!!e.api_token,lastProjectKey:e.last_project_key}:{configured:!1}}async function u(e,t,s){let{data:{user:a}}=await r.N.auth.getUser();if(!a)throw Error("Not authenticated");let{error:n}=await r.N.from("jira_configs").upsert({domain:e,email:t,api_token:s,user_id:a.id},{onConflict:"user_id"});if(n)throw n}async function m(e){let{data:{session:t}}=await r.N.auth.getSession(),s=await fetch("/api/jira/create-issue",{method:"POST",headers:{"Content-Type":"application/json",...(null==t?void 0:t.access_token)?{Authorization:"Bearer ".concat(t.access_token)}:{}},body:JSON.stringify(e)});if(!s.ok)throw Error((await s.json()).message||"Failed to create Jira issue");return s.json()}},3998:(e,t,s)=>{"use strict";s.d(t,{$:()=>d});var r=s(5155),a=s(2115),n=s(2467),i=s(3101),l=s(4269);let o=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:s,variant:a,size:i,asChild:d=!1,...c}=e,u=d?n.DX:"button";return(0,r.jsx)(u,{className:(0,l.cn)(o({variant:a,size:i,className:s})),ref:t,...c})});d.displayName="Button"},4081:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ey});var r=s(5155),a=s(9007),n=s(2265),i=s(1272),l=s(8771),o=s(3063),d=s(8428),c=s(2115),u=s(5380);let m=["PRD","AI Coding Rules & Standards","API Documentation","Accessibility Compliance Checklist","App Architecture Plan","Bug Investigation & Fix Plan","Competitive Analysis Report","Customer Journey Map","Database Schema Design","Feature Implementation Spec","Go-to-Market Plan"],x=()=>{var e,t,s,x,h;let{user:p,signOut:f}=(0,u.A)(),[g,j]=(0,c.useState)(!1),[y,b]=(0,c.useState)("PRD");return(0,r.jsxs)("header",{className:"h-14 border-b border-border flex items-center justify-between px-3 md:px-4 panel-bg relative z-50",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 md:gap-3 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,r.jsx)("div",{className:"w-8 h-8 rounded-lg tofu-gradient flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-primary-foreground font-bold text-sm",children:"\uD83E\uDDCA"})}),(0,r.jsx)("span",{className:"font-semibold text-foreground text-sm tracking-tight hidden sm:inline",children:"tofuOS"})]}),(0,r.jsx)("div",{className:"w-px h-6 bg-border mx-1 hidden sm:block"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("button",{onClick:()=>j(!g),className:"flex items-center gap-1.5 px-2 md:px-3 py-1.5 text-sm text-foreground hover:bg-muted rounded-lg transition-colors truncate",children:[(0,r.jsx)("span",{className:"text-muted-foreground text-xs hidden sm:inline",children:"ChatPRD:"}),(0,r.jsx)("span",{className:"font-medium truncate max-w-[120px] md:max-w-none",children:y}),(0,r.jsx)(a.A,{className:"w-3.5 h-3.5 text-muted-foreground flex-shrink-0"})]}),g&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"fixed inset-0",onClick:()=>j(!1)}),(0,r.jsx)("div",{className:"absolute top-full left-0 mt-1 w-72 panel-bg border border-border rounded-xl shadow-lg py-1 max-h-80 overflow-y-auto",children:m.map(e=>(0,r.jsxs)("button",{onClick:()=>{b(e),j(!1)},className:"w-full text-left px-4 py-2.5 text-sm hover:bg-muted transition-colors flex items-center gap-2 ".concat(y===e?"text-foreground font-medium":"text-muted-foreground"),children:[y===e&&(0,r.jsx)("svg",{className:"w-4 h-4 text-primary flex-shrink-0",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:(0,r.jsx)("polyline",{points:"20 6 9 17 4 12"})}),(0,r.jsxs)("span",{className:y!==e?"ml-6":"",children:["ChatPRD: ",e]})]},e))})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0",children:[(0,r.jsxs)("button",{className:"hidden md:flex items-center gap-2 px-3 py-1.5 tofu-gradient text-primary-foreground rounded-lg text-sm font-medium hover:opacity-90 transition-opacity",children:[(0,r.jsx)(n.A,{className:"w-4 h-4"}),"New Project"]}),(0,r.jsx)("button",{className:"md:hidden p-2 tofu-gradient text-primary-foreground rounded-lg hover:opacity-90 transition-opacity",children:(0,r.jsx)(n.A,{className:"w-4 h-4"})}),(0,r.jsxs)("button",{className:"hidden md:flex items-center gap-2 px-3 py-1.5 text-sm text-foreground hover:bg-muted rounded-lg transition-colors",children:[(0,r.jsx)(i.A,{className:"w-4 h-4"}),"Analytics"]}),(0,r.jsxs)("button",{className:"hidden md:flex items-center gap-2 px-3 py-1.5 text-sm text-foreground hover:bg-muted rounded-lg transition-colors",children:[(0,r.jsx)(l.A,{className:"w-4 h-4"}),"Share"]}),(0,r.jsxs)("button",{className:"hidden md:flex items-center gap-2 px-3 py-1.5 text-sm text-foreground hover:bg-muted rounded-lg transition-colors",children:[(0,r.jsx)(o.A,{className:"w-4 h-4"}),"Settings"]}),(0,r.jsx)("div",{className:"hidden sm:flex gap-1",children:(0,r.jsx)("button",{className:"md:hidden p-2 text-foreground hover:bg-muted rounded-lg transition-colors",children:(0,r.jsx)(o.A,{className:"w-4 h-4"})})}),(0,r.jsxs)("button",{onClick:f,className:"hidden md:flex items-center gap-2 px-3 py-1.5 text-sm text-muted-foreground hover:text-foreground hover:bg-muted rounded-lg transition-colors",title:"Sign out",children:[(0,r.jsx)(d.A,{className:"w-4 h-4"}),"Sign out"]}),(0,r.jsx)("div",{className:"w-8 h-8 rounded-full tofu-gradient ml-1 md:ml-2 flex-shrink-0 flex items-center justify-center text-primary-foreground text-xs font-medium",title:null==p?void 0:p.email,children:null!=(h=null!=(x=null==p||null==(t=p.user_metadata)||null==(e=t.display_name)?void 0:e.charAt(0))?x:null==p||null==(s=p.email)?void 0:s.charAt(0))?h:"?"})]})]})};var h=s(5225),p=s(6713),f=s(2649),g=s(5584),j=s(109),y=s(2770),b=s(3505),v=s(6615),N=s(4269);let w=b.bL;b.l9;let k=b.ZL;b.bm;let C=c.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(b.hJ,{ref:t,className:(0,N.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a})});C.displayName=b.hJ.displayName;let S=c.forwardRef((e,t)=>{let{className:s,children:a,...n}=e;return(0,r.jsxs)(k,{children:[(0,r.jsx)(C,{}),(0,r.jsxs)(b.UC,{ref:t,className:(0,N.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...n,children:[a,(0,r.jsxs)(b.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[(0,r.jsx)(v.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});S.displayName=b.UC.displayName;let A=e=>{let{className:t,...s}=e;return(0,r.jsx)("div",{className:(0,N.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};A.displayName="DialogHeader";let P=c.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(b.hE,{ref:t,className:(0,N.cn)("text-lg font-semibold leading-none tracking-tight",s),...a})});P.displayName=b.hE.displayName;let E=c.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(b.VY,{ref:t,className:(0,N.cn)("text-sm text-muted-foreground",s),...a})});E.displayName=b.VY.displayName;var I=s(6444),R=s(5142),J=s(3998),D=s(5667);let F=D.bL,_=c.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(D.B8,{ref:t,className:(0,N.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...a})});_.displayName=D.B8.displayName;let z=c.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(D.l9,{ref:t,className:(0,N.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",s),...a})});z.displayName=D.l9.displayName;let U=c.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(D.UC,{ref:t,className:(0,N.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...a})});U.displayName=D.UC.displayName;var W=s(9389),O=s(5797);let T=c.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(W.bL,{className:(0,N.cn)("grid gap-2",s),...a,ref:t})});T.displayName=W.bL.displayName;let L=c.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(W.q7,{ref:t,className:(0,N.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...a,children:(0,r.jsx)(W.C1,{className:"flex items-center justify-center",children:(0,r.jsx)(O.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});L.displayName=W.q7.displayName;let B=e=>{let{open:t,onOpenChange:s,onAddReviews:a,onAddDocuments:n}=e,[i,l]=(0,c.useState)("play"),[o,d]=(0,c.useState)(""),[u,m]=(0,c.useState)(null),[x,p]=(0,c.useState)(!1),[g,j]=(0,c.useState)([]),[b,v]=(0,c.useState)(null),[k,C]=(0,c.useState)(!1),D=(0,c.useRef)(null),W=async()=>{m(null);let e=o.trim();if(!e)return void m("Please enter an app page URL.");let t=e.includes("play.google.com")||"play"===i,r=e.includes("apps.apple.com")||e.includes("itunes.apple.com")||"apple"===i;if(!t&&!r)return void m("Please enter a valid Play Store or App Store app page URL.");p(!0);try{await (null==a?void 0:a(i,e)),d(""),m(null),s(!1)}catch(e){m(e instanceof Error?e.message:"Failed to add reviews source")}finally{p(!1)}},O=async()=>{if(v(null),0===g.length)return void v("Please select at least one file (Word, PDF, or Excel).");C(!0);try{await (null==n?void 0:n(g)),j([]),s(!1)}catch(e){v(e instanceof Error?e.message:"Failed to upload documents")}finally{C(!1)}};return(0,r.jsx)(w,{open:t,onOpenChange:e=>{e||(d(""),m(null),j([]),v(null)),s(e)},children:(0,r.jsxs)(S,{className:"sm:max-w-md",children:[(0,r.jsxs)(A,{children:[(0,r.jsx)(P,{children:"Add sources"}),(0,r.jsx)(E,{children:"Choose a source type and add app reviews or documents to your project."})]}),(0,r.jsxs)(F,{defaultValue:"reviews",className:"w-full",children:[(0,r.jsxs)(_,{className:"grid w-full grid-cols-2",children:[(0,r.jsxs)(z,{value:"reviews",className:"flex items-center gap-2",children:[(0,r.jsx)(f.A,{className:"w-4 h-4"}),"Reviews"]}),(0,r.jsxs)(z,{value:"documents",className:"flex items-center gap-2",children:[(0,r.jsx)(h.A,{className:"w-4 h-4"}),"Documents"]})]}),(0,r.jsxs)(U,{value:"reviews",className:"space-y-4 mt-4",children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Collect app reviews from a Google Play Store or Apple App Store app page."}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(I.J,{children:"Store"}),(0,r.jsxs)(T,{value:i,onValueChange:e=>l(e),className:"flex gap-4",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,r.jsx)(L,{value:"play"}),(0,r.jsx)(y.A,{className:"w-4 h-4 text-muted-foreground"}),(0,r.jsx)("span",{className:"text-sm",children:"Play Store"})]}),(0,r.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,r.jsx)(L,{value:"apple"}),(0,r.jsx)("span",{className:"text-sm",children:"App Store"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(I.J,{htmlFor:"reviews-url",children:"App page URL"}),(0,r.jsx)(R.p,{id:"reviews-url",type:"url",placeholder:"play"===i?"https://play.google.com/store/apps/details?id=...":"https://apps.apple.com/app/id...",value:o,onChange:e=>{d(e.target.value),m(null)},className:(0,N.cn)(u&&"border-destructive")}),u&&(0,r.jsx)("p",{className:"text-sm text-destructive",children:u})]}),(0,r.jsx)(J.$,{onClick:W,disabled:x,className:"w-full tofu-gradient text-primary-foreground hover:opacity-90",children:x?"Adding…":"Add reviews source"})]}),(0,r.jsxs)(U,{value:"documents",className:"space-y-4 mt-4",children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Upload Word (.doc, .docx), PDF, or Excel (.xls, .xlsx) files."}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(I.J,{children:"Files"}),(0,r.jsx)("input",{ref:D,type:"file",accept:".pdf,.doc,.docx,.xls,.xlsx",multiple:!0,onChange:e=>{var t;let s=Array.from(null!=(t=e.target.files)?t:[]).filter(e=>e.name.endsWith(".pdf")||e.name.endsWith(".doc")||e.name.endsWith(".docx")||e.name.endsWith(".xls")||e.name.endsWith(".xlsx"));j(e=>[...e,...s]),v(null),D.current&&(D.current.value="")},className:"hidden"}),(0,r.jsx)(J.$,{type:"button",variant:"outline",className:"w-full border-dashed",onClick:()=>{var e;return null==(e=D.current)?void 0:e.click()},children:"Choose Word, PDF, or Excel files"}),g.length>0&&(0,r.jsx)("ul",{className:"text-sm space-y-1 mt-2",children:g.map((e,t)=>(0,r.jsxs)("li",{className:"flex items-center justify-between gap-2 py-1 px-2 rounded bg-muted",children:[(0,r.jsx)("span",{className:"truncate text-foreground",children:e.name}),(0,r.jsx)("button",{type:"button",onClick:()=>{j(e=>e.filter((e,s)=>s!==t))},className:"text-muted-foreground hover:text-destructive shrink-0","aria-label":"Remove ".concat(e.name),children:"\xd7"})]},"".concat(e.name,"-").concat(t)))}),b&&(0,r.jsx)("p",{className:"text-sm text-destructive",children:b})]}),(0,r.jsx)(J.$,{onClick:O,disabled:0===g.length||k,className:"w-full tofu-gradient text-primary-foreground hover:opacity-90",children:k?"Uploading…":"Add documents"})]})]})]})})};var q=s(960);let M=e=>{let{mobile:t}=e,{isAuthenticated:s}=(0,u.A)(),[a,i]=(0,c.useState)([]),[l,o]=(0,c.useState)(""),[d,m]=(0,c.useState)(!1),[x,y]=(0,c.useState)(!0),[b,v]=(0,c.useState)(null),N=(0,c.useCallback)(async()=>{if(s){y(!0),v(null);try{let e=await (0,q.dh)();i(e)}catch(e){v(e instanceof Error?e.message:"Failed to load sources"),i([])}finally{y(!1)}}},[s]);(0,c.useEffect)(()=>{N()},[N]);let w=async e=>{let t=a.map(t=>t.id===e?{...t,selected:!t.selected}:t);i(t);try{let e=await (0,q.UU)(t);i(e)}catch(e){i(a)}},k=a.length>0&&a.every(e=>e.selected),C=async()=>{let e=a.map(e=>({...e,selected:!k}));i(e);try{let t=await (0,q.UU)(e);i(t)}catch(e){i(a)}},S=async(e,t)=>{try{await (0,q.g9)(e,t),await N()}catch(e){throw e}},A=async e=>{try{await (0,q.jx)(e),await N()}catch(e){throw e}};return(0,r.jsxs)("aside",{className:"".concat(t?"w-full h-full":"w-72 min-w-[280px] border-r"," border-border flex flex-col panel-bg pb-safe"),children:[(0,r.jsxs)("div",{className:"p-4 border-b border-border flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-sm font-semibold text-foreground",children:"Sources"}),(0,r.jsx)("button",{className:"p-1 rounded hover:bg-muted transition-colors",children:(0,r.jsxs)("svg",{className:"w-4 h-4 text-muted-foreground",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,r.jsx)("rect",{x:"3",y:"3",width:"7",height:"7"}),(0,r.jsx)("rect",{x:"14",y:"3",width:"7",height:"7"}),(0,r.jsx)("rect",{x:"3",y:"14",width:"7",height:"7"}),(0,r.jsx)("rect",{x:"14",y:"14",width:"7",height:"7"})]})})]}),(0,r.jsxs)("div",{className:"p-3",children:[(0,r.jsxs)("button",{onClick:()=>m(!0),className:"w-full flex items-center justify-center gap-2 py-2.5 px-4 border border-dashed border-border rounded-lg text-sm text-muted-foreground hover:bg-muted hover:text-foreground transition-colors",children:[(0,r.jsx)(n.A,{className:"w-4 h-4"}),"Add Sources"]}),(0,r.jsx)(B,{open:d,onOpenChange:m,onAddReviews:S,onAddDocuments:A})]}),(0,r.jsx)("div",{className:"px-3 pb-2",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(j.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,r.jsx)("input",{type:"text",placeholder:"Search sources...",value:l,onChange:e=>o(e.target.value),className:"w-full pl-9 pr-3 py-2 text-sm bg-muted rounded-lg border-none outline-none focus:ring-2 focus:ring-ring text-foreground placeholder:text-muted-foreground"})]})}),(0,r.jsx)("div",{className:"px-3 pb-2",children:(0,r.jsxs)("button",{onClick:C,className:"flex items-center gap-2 text-xs text-muted-foreground hover:text-foreground transition-colors",children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded border flex items-center justify-center transition-colors ".concat(k?"bg-primary border-primary":"border-border"),children:k&&(0,r.jsx)("svg",{className:"w-3 h-3 text-primary-foreground",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:(0,r.jsx)("polyline",{points:"20 6 9 17 4 12"})})}),"Select All Sources"]})}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto px-3 space-y-1",children:x?(0,r.jsx)("p",{className:"text-sm text-muted-foreground py-4 text-center",children:"Loading sources…"}):b?(0,r.jsx)("p",{className:"text-sm text-destructive py-4 text-center",children:b}):a.filter(e=>e.name.toLowerCase().includes(l.toLowerCase())).map(e=>(0,r.jsxs)("div",{onClick:()=>w(e.id),className:"flex items-center gap-3 p-2 rounded-lg cursor-pointer hover:bg-muted transition-colors group",children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded border flex-shrink-0 flex items-center justify-center transition-colors ".concat(e.selected?"bg-primary border-primary":"border-border"),children:e.selected&&(0,r.jsx)("svg",{className:"w-3 h-3 text-primary-foreground",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:(0,r.jsx)("polyline",{points:"20 6 9 17 4 12"})})}),(e=>{switch(e){case"pdf":return(0,r.jsx)(h.A,{className:"w-4 h-4 text-destructive"});case"link":return(0,r.jsx)(p.A,{className:"w-4 h-4 text-primary"});case"transcript":return(0,r.jsx)(h.A,{className:"w-4 h-4 text-tofu-warm"});case"reviews":return(0,r.jsx)(f.A,{className:"w-4 h-4 text-amber-500"});case"document":return(0,r.jsx)(g.A,{className:"w-4 h-4 text-emerald-600"})}})(e.type),(0,r.jsx)("span",{className:"text-sm truncate text-foreground",children:e.name})]},e.id))})]})};var G=s(9338),K=s(5468),$=s(8263),V=s(2925),Z=s(8176),X=s(1288),Y=s(8614),H=s(431),Q=s(4979);function ee(e){let{open:t,onOpenChange:a,onSaved:n}=e,[i,l]=(0,c.useState)(""),[o,d]=(0,c.useState)(""),[u,m]=(0,c.useState)(""),[x,h]=(0,c.useState)(null),[p,f]=(0,c.useState)(!1),g=async()=>{h(null);let e=i.trim().replace(/^https?:\/\//,"").replace(/\/$/,"");if(!e||!o.trim()||!u.trim())return void h("Domain, email, and API token are required.");f(!0);try{let{saveJiraConfig:t}=await Promise.resolve().then(s.bind(s,960));await t(e,o.trim(),u.trim()),n(),a(!1),l(""),d(""),m("")}catch(e){h(e instanceof Error?e.message:"Failed to save")}finally{f(!1)}};return(0,r.jsx)(w,{open:t,onOpenChange:a,children:(0,r.jsxs)(S,{className:"sm:max-w-md",children:[(0,r.jsxs)(A,{children:[(0,r.jsx)(P,{children:"Jira configuration"}),(0,r.jsxs)(E,{children:["Connect your Jira to create tickets from insights. Use your Atlassian email and an"," ",(0,r.jsx)("a",{href:"https://id.atlassian.com/manage-profile/security/api-tokens",target:"_blank",rel:"noopener noreferrer",className:"text-primary underline",children:"API token"}),"."]})]}),(0,r.jsxs)("div",{className:"space-y-4 pt-2",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(I.J,{htmlFor:"jira-domain",children:"Jira domain"}),(0,r.jsx)(R.p,{id:"jira-domain",placeholder:"your-site.atlassian.net",value:i,onChange:e=>l(e.target.value)})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(I.J,{htmlFor:"jira-email",children:"Email"}),(0,r.jsx)(R.p,{id:"jira-email",type:"email",placeholder:"you@company.com",value:o,onChange:e=>d(e.target.value)})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(I.J,{htmlFor:"jira-token",children:"API token"}),(0,r.jsx)(R.p,{id:"jira-token",type:"password",placeholder:"••••••••",value:u,onChange:e=>m(e.target.value)})]}),x&&(0,r.jsx)("p",{className:"text-sm text-destructive",children:x}),(0,r.jsx)(J.$,{onClick:g,disabled:p,className:"w-full tofu-gradient text-primary-foreground hover:opacity-90",children:p?"Saving…":"Save"})]})]})})}function et(e){let{open:t,onOpenChange:s,insight:a,initialProjectKey:n="",onCreated:i}=e,[l,o]=(0,c.useState)(a),[d,u]=(0,c.useState)(a),[m,x]=(0,c.useState)(n),[h,p]=(0,c.useState)("Task"),[f,g]=(0,c.useState)(null),[j,y]=(0,c.useState)(!1),[b,v]=(0,c.useState)(null);(0,c.useEffect)(()=>{t&&(o(a),u(a),x(n),v(null))},[t,a,n]);let N=e=>{e||(o(a),u(a),x(""),p("Task"),g(null),v(null)),s(e)},k=async()=>{if(g(null),!l.trim())return void g("Summary is required.");if(!m.trim())return void g("Project key is required (e.g. KAN).");y(!0);try{let e=await (0,q.mC)({summary:l.trim(),description:d.trim()||l.trim(),projectKey:m.trim(),issueType:h.trim()||void 0});v(e.url),null==i||i(e.url,m.trim())}catch(e){g(e instanceof Error?e.message:"Failed to create issue")}finally{y(!1)}};return(0,r.jsx)(w,{open:t,onOpenChange:N,children:(0,r.jsxs)(S,{className:"sm:max-w-md",children:[(0,r.jsxs)(A,{children:[(0,r.jsx)(P,{children:"Create Jira ticket"}),(0,r.jsx)(E,{children:"Create a Jira issue from this insight. Edit summary and optional fields below."})]}),(0,r.jsx)("div",{className:"space-y-4 pt-2",children:b?(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("p",{className:"text-sm text-foreground",children:"Ticket created."}),(0,r.jsx)("a",{href:b,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary underline",children:"Open in Jira"}),(0,r.jsx)("div",{className:"flex gap-2 pt-2",children:(0,r.jsx)(J.$,{variant:"outline",onClick:()=>N(!1),children:"Close"})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(I.J,{htmlFor:"jira-summary",children:"Summary"}),(0,r.jsx)(R.p,{id:"jira-summary",value:l,onChange:e=>o(e.target.value),placeholder:"Issue summary"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(I.J,{htmlFor:"jira-description",children:"Description (optional)"}),(0,r.jsx)(R.p,{id:"jira-description",value:d,onChange:e=>u(e.target.value),placeholder:"Issue description"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(I.J,{htmlFor:"jira-project",children:"Project key"}),(0,r.jsx)(R.p,{id:"jira-project",value:m,onChange:e=>x(e.target.value),placeholder:"e.g. PROJ"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(I.J,{htmlFor:"jira-type",children:"Issue type"}),(0,r.jsx)(R.p,{id:"jira-type",value:h,onChange:e=>p(e.target.value),placeholder:"Task"})]})]}),f&&(0,r.jsx)("p",{className:"text-sm text-destructive",children:f}),(0,r.jsx)(J.$,{onClick:k,disabled:j,className:"w-full tofu-gradient text-primary-foreground hover:opacity-90",children:j?"Creating…":"Create issue"})]})})]})})}let es=["What should we build next based on customer feedback?","Create a PRD for the most requested feature.","Which pain points appear most frequently in the interviews?"],er=()=>{let[e,t]=(0,c.useState)([{role:"assistant",content:"Based on the **47 customer interviews** and usage data, I've summarized the key insights:\n\n**Top Pain Points:**\n- 73% of users report difficulties with **feature prioritization**\n- Missing connection between **customer feedback** and **development planning**\n- Manual synthesis of interviews takes an average of **12 hours per sprint**\n\n**Recommended Next Steps:**\n1. Implement automatic feedback categorization\n2. Calculate impact score based on user frequency\n3. Direct integration with the development backlog"}]),[s,a]=(0,c.useState)(""),[n,i]=(0,c.useState)([]),[l,o]=(0,c.useState)(!1),[d,u]=(0,c.useState)(null),[m,x]=(0,c.useState)(!1),[h,p]=(0,c.useState)(!1),[f,g]=(0,c.useState)(!1),[j,y]=(0,c.useState)(""),[b,v]=(0,c.useState)("");(0,c.useEffect)(()=>{(0,q.jd)().then(e=>{x(!!(null==e?void 0:e.configured)),(null==e?void 0:e.lastProjectKey)&&v(e.lastProjectKey)})},[]);let N=async()=>{u(null),o(!0);try{let e=(await (0,q.dh)()).filter(e=>e.selected).map(e=>e.id);if(0===e.length)return void u("Select at least one source in the left panel.");let{insights:t}=await (0,q.TW)(e);i(t||[])}catch(e){u(e instanceof Error?e.message:"Analysis failed"),i([])}finally{o(!1)}},w=async()=>{if(!s.trim())return;a("");let r=[...e,{role:"user",content:s}];t([...r,{role:"assistant",content:"Thinking..."}]);try{let a=(await (0,q.dh)()).filter(e=>e.selected).map(e=>e.id),n=await (0,q.zv)(s,a,e);t([...r,{role:"assistant",content:n.content}])}catch(e){t([...r,{role:"assistant",content:"Sorry, I encountered an error. Please check your connection and Gemini API key."}])}};return(0,r.jsxs)("main",{className:"flex-1 flex flex-col min-w-0 panel-bg",children:[(0,r.jsxs)("div",{className:"px-6 py-3 border-b border-border flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-sm font-semibold text-foreground",children:"Chat"}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsxs)("button",{onClick:N,disabled:l,className:"flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-medium tofu-gradient text-primary-foreground hover:opacity-90 transition-opacity disabled:opacity-70",children:[(0,r.jsx)(G.A,{className:"w-4 h-4"}),l?"Analyzing…":"Analyze sources"]}),(0,r.jsx)("button",{className:"p-2 rounded-lg hover:bg-muted transition-colors",children:(0,r.jsx)(K.A,{className:"w-4 h-4 text-muted-foreground"})}),(0,r.jsx)("button",{className:"p-2 rounded-lg hover:bg-muted transition-colors",children:(0,r.jsx)($.A,{className:"w-4 h-4 text-muted-foreground"})})]})]}),n.length>0&&(0,r.jsxs)("div",{className:"px-6 py-4 border-b border-border bg-muted/30",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-foreground mb-3",children:"Insights (project manager)"}),(0,r.jsx)("ul",{className:"space-y-2",children:n.map((e,t)=>(0,r.jsxs)("li",{className:"flex items-start gap-2 text-sm text-foreground bg-background border border-border rounded-lg px-3 py-2",children:[(0,r.jsx)("span",{className:"flex-1 min-w-0",children:e}),(0,r.jsxs)("button",{type:"button",onClick:()=>(e=>{m?(y(e),g(!0)):(p(!0),y(e))})(e),className:"flex items-center gap-1.5 shrink-0 px-2.5 py-1 rounded-md text-xs font-medium bg-primary/10 text-primary hover:bg-primary/20 transition-colors",children:[(0,r.jsx)(V.A,{className:"w-3.5 h-3.5"}),"Create Jira ticket"]})]},t))})]}),d&&(0,r.jsx)("div",{className:"px-6 py-2 text-sm text-destructive",children:d}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto px-6 py-6 space-y-6",children:[e.map((e,t)=>(0,r.jsx)("div",{children:"assistant"===e.role?(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("div",{className:"text-sm leading-relaxed text-foreground whitespace-pre-line",children:e.content.split(/(\*\*[^*]+\*\*)/g).map((e,t)=>e.startsWith("**")&&e.endsWith("**")?(0,r.jsx)("strong",{className:"font-semibold text-foreground",children:e.slice(2,-2)},t):(0,r.jsx)("span",{children:e},t))}),(0,r.jsxs)("div",{className:"flex items-center gap-1 pt-1",children:[(0,r.jsx)("button",{className:"p-1.5 rounded hover:bg-muted transition-colors",title:"Save to Note",children:(0,r.jsx)(Z.A,{className:"w-3.5 h-3.5 text-muted-foreground"})}),(0,r.jsx)("button",{className:"p-1.5 rounded hover:bg-muted transition-colors",title:"Copy",children:(0,r.jsx)(X.A,{className:"w-3.5 h-3.5 text-muted-foreground"})}),(0,r.jsx)("button",{className:"p-1.5 rounded hover:bg-muted transition-colors",children:(0,r.jsx)(Y.A,{className:"w-3.5 h-3.5 text-muted-foreground"})}),(0,r.jsx)("button",{className:"p-1.5 rounded hover:bg-muted transition-colors",children:(0,r.jsx)(H.A,{className:"w-3.5 h-3.5 text-muted-foreground"})})]})]}):(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)("div",{className:"tofu-gradient text-primary-foreground px-4 py-2.5 rounded-2xl rounded-br-md text-sm max-w-md",children:e.content})})},t)),(0,r.jsx)("div",{className:"space-y-2 pt-2",children:es.map((e,t)=>(0,r.jsx)("button",{onClick:()=>{a(e)},className:"block w-fit text-left text-sm px-4 py-2.5 suggestion-bg rounded-xl suggestion-hover transition-colors text-foreground border border-border",children:e},t))})]}),(0,r.jsxs)("div",{className:"p-4 border-t border-border bg-background",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 chat-input-bg border border-border rounded-xl px-4 py-2 focus-within:ring-2 focus-within:ring-ring transition-shadow mb-safe",children:[(0,r.jsx)("input",{type:"text",placeholder:"Type a message...",value:s,onChange:e=>a(e.target.value),onKeyDown:e=>"Enter"===e.key&&w(),className:"flex-1 bg-transparent text-sm outline-none text-foreground placeholder:text-muted-foreground"}),(0,r.jsx)("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:"3 Sources"}),(0,r.jsx)("button",{onClick:w,className:"p-1.5 rounded-lg tofu-gradient text-primary-foreground hover:opacity-90 transition-opacity",children:(0,r.jsx)(Q.A,{className:"w-4 h-4"})})]}),(0,r.jsx)("p",{className:"text-[11px] text-muted-foreground text-center mt-2",children:"tofuOS can make mistakes. Please verify the responses."})]}),(0,r.jsx)(ee,{open:h,onOpenChange:p,onSaved:()=>{(0,q.jd)().then(e=>{x(!!(null==e?void 0:e.configured)),(null==e?void 0:e.lastProjectKey)&&v(e.lastProjectKey)}),j&&g(!0)}}),(0,r.jsx)(et,{open:f,onOpenChange:g,insight:j,initialProjectKey:b,onCreated:(e,t)=>{v(t)}})]})};var ea=s(5128),en=s(7187),ei=s(4820),el=s(6802),eo=s(9990),ed=s(6943),ec=s(8844),eu=s(3037),em=s(6541),ex=s(4640);let eh=[{id:"prd",label:"PRD",icon:(0,r.jsx)(h.A,{className:"w-4 h-4"}),color:"text-primary"},{id:"coding-rules",label:"AI Coding Rules & Standards",icon:(0,r.jsx)(ea.A,{className:"w-4 h-4"}),color:"text-tofu-warm"},{id:"api-docs",label:"API Documentation",icon:(0,r.jsx)(en.A,{className:"w-4 h-4"}),color:"text-primary"},{id:"accessibility",label:"Accessibility Compliance",icon:(0,r.jsx)(ei.A,{className:"w-4 h-4"}),color:"text-tofu-warm"},{id:"architecture",label:"App Architecture Plan",icon:(0,r.jsx)(el.A,{className:"w-4 h-4"}),color:"text-primary"},{id:"bug-fix",label:"Bug Investigation & Fix Plan",icon:(0,r.jsx)(eo.A,{className:"w-4 h-4"}),color:"text-destructive"},{id:"competitive",label:"Competitive Analysis Report",icon:(0,r.jsx)(i.A,{className:"w-4 h-4"}),color:"text-tofu-warm"},{id:"journey-map",label:"Customer Journey Map",icon:(0,r.jsx)(ed.A,{className:"w-4 h-4"}),color:"text-primary"},{id:"db-schema",label:"Database Schema Design",icon:(0,r.jsx)(ec.A,{className:"w-4 h-4"}),color:"text-tofu-warm"},{id:"feature-spec",label:"Feature Implementation Spec",icon:(0,r.jsx)(eu.A,{className:"w-4 h-4"}),color:"text-primary"},{id:"gtm",label:"Go-to-Market Plan",icon:(0,r.jsx)(em.A,{className:"w-4 h-4"}),color:"text-tofu-warm"}],ep=e=>{let{mobile:t}=e,[s,a]=(0,c.useState)(null);return(0,r.jsxs)("aside",{className:"".concat(t?"w-full h-full":"w-80 min-w-[300px] border-l"," border-border flex flex-col panel-bg"),children:[(0,r.jsxs)("div",{className:"p-4 border-b border-border flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-sm font-semibold text-foreground",children:"Studio"}),(0,r.jsx)("button",{className:"p-1 rounded hover:bg-muted transition-colors",children:(0,r.jsxs)("svg",{className:"w-4 h-4 text-muted-foreground",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,r.jsx)("rect",{x:"3",y:"3",width:"7",height:"7"}),(0,r.jsx)("rect",{x:"14",y:"3",width:"7",height:"7"}),(0,r.jsx)("rect",{x:"3",y:"14",width:"7",height:"7"}),(0,r.jsx)("rect",{x:"14",y:"14",width:"7",height:"7"})]})})]}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto p-3",children:(0,r.jsx)("div",{className:"grid grid-cols-2 gap-2",children:eh.map(e=>(0,r.jsxs)("button",{onClick:()=>a(s===e.id?null:e.id),className:"flex items-center gap-2.5 p-3 rounded-xl text-left transition-all group ".concat(s===e.id?"bg-primary/10 border border-primary/30":"studio-card-bg studio-card-hover border border-transparent"),children:[(0,r.jsx)("span",{className:e.color,children:e.icon}),(0,r.jsx)("span",{className:"text-xs font-medium text-foreground leading-tight flex-1",children:e.label}),(0,r.jsx)(ex.A,{className:"w-3 h-3 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0"})]},e.id))})}),(0,r.jsxs)("div",{className:"p-4 border-t border-border bg-background pb-safe",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center text-center py-6",children:[(0,r.jsx)(G.A,{className:"w-6 h-6 text-primary mb-2"}),(0,r.jsx)("p",{className:"text-sm font-medium text-primary",children:"Studio output will be saved here."}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-1 leading-relaxed",children:"After adding sources, click to generate PRDs, Feature Specs, and more."})]}),(0,r.jsxs)("button",{className:"w-full flex items-center justify-center gap-2 py-2.5 px-4 tofu-gradient text-primary-foreground rounded-xl text-sm font-medium hover:opacity-90 transition-opacity",children:[(0,r.jsx)(h.A,{className:"w-4 h-4"}),"Create Document"]})]})]})},ef=()=>{let e=function(){let[e,t]=c.useState(void 0);return c.useEffect(()=>{let e=window.matchMedia("(max-width: ".concat(1023,"px)")),s=()=>{t(window.innerWidth<1024)};return e.addEventListener("change",s),t(window.innerWidth<1024),()=>e.removeEventListener("change",s)},[]),!!e}(),[t,s]=(0,c.useState)("chat");return e?(0,r.jsxs)("div",{className:"h-[100dvh] flex flex-col bg-background overflow-hidden",children:[(0,r.jsx)(x,{}),(0,r.jsx)("div",{className:"flex border-b border-border",children:[{key:"sources",label:"Sources"},{key:"chat",label:"Chat"},{key:"studio",label:"Studio"}].map(e=>(0,r.jsxs)("button",{onClick:()=>s(e.key),className:"flex-1 py-3 text-sm font-medium transition-colors relative ".concat(t===e.key?"text-foreground":"text-muted-foreground"),children:[e.label,t===e.key&&(0,r.jsx)("span",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-12 h-0.5 bg-primary rounded-full"})]},e.key))}),(0,r.jsxs)("div",{className:"flex-1 min-h-0",children:["sources"===t&&(0,r.jsx)(M,{mobile:!0}),"chat"===t&&(0,r.jsx)(er,{}),"studio"===t&&(0,r.jsx)(ep,{mobile:!0})]})]}):(0,r.jsxs)("div",{className:"h-screen flex flex-col bg-background overflow-hidden",children:[(0,r.jsx)(x,{}),(0,r.jsxs)("div",{className:"flex flex-1 min-h-0",children:[(0,r.jsx)(M,{}),(0,r.jsx)(er,{}),(0,r.jsx)(ep,{})]})]})};var eg=s(63);let ej=e=>{let{children:t}=e,{isAuthenticated:s,isLoading:a}=(0,u.A)(),n=(0,eg.useRouter)();return((0,c.useEffect)(()=>{a||s||n.push("/login")},[a,s,n]),a)?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,r.jsx)("div",{className:"w-8 h-8 rounded-lg tofu-gradient animate-pulse"})}):s?(0,r.jsx)(r.Fragment,{children:t}):null};function ey(){return(0,r.jsx)(ej,{children:(0,r.jsx)(ef,{})})}},4269:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var r=s(2821),a=s(5889);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}},5142:(e,t,s)=>{"use strict";s.d(t,{p:()=>i});var r=s(5155),a=s(2115),n=s(4269);let i=a.forwardRef((e,t)=>{let{className:s,type:a,...i}=e;return(0,r.jsx)("input",{type:a,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...i})});i.displayName="Input"},5380:(e,t,s)=>{"use strict";s.d(t,{A:()=>d,AuthProvider:()=>o});var r=s(5155),a=s(2115),n=s(6648),i=s(63);let l=a.createContext(void 0);function o(e){let{children:t}=e,[s,o]=a.useState(null),[d,c]=a.useState(null),[u,m]=a.useState(!0),x=(0,i.useRouter)();a.useEffect(()=>{let e=async()=>{var e;let{data:{session:t},error:s}=await n.N.auth.getSession();c(t),o(null!=(e=null==t?void 0:t.user)?e:null),m(!1)},{data:t}=n.N.auth.onAuthStateChange((e,t)=>{var s;c(t),o(null!=(s=null==t?void 0:t.user)?s:null),m(!1),"SIGNED_IN"===e&&x.refresh(),"SIGNED_OUT"===e&&(x.push("/login"),x.refresh())});return e(),()=>{t.subscription.unsubscribe()}},[x]);let h=async()=>{await n.N.auth.signOut()};return(0,r.jsx)(l.Provider,{value:{user:s,session:d,isLoading:u,signOut:h,isAuthenticated:!!s},children:t})}let d=()=>{let e=a.useContext(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},6444:(e,t,s)=>{"use strict";s.d(t,{J:()=>d});var r=s(5155),a=s(2115),n=s(489),i=s(3101),l=s(4269);let o=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.b,{ref:t,className:(0,l.cn)(o(),s),...a})});d.displayName=n.b.displayName},6648:(e,t,s)=>{"use strict";s.d(t,{N:()=>i});var r=s(5497);let a="https://zywsedivjfypnzzyoafq.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp5d3NlZGl2amZ5cG56enlvYWZxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzIxNzE5MDEsImV4cCI6MjA4Nzc0NzkwMX0.GnTMzJ9SWUDVaPeCawW_2EETfkHu5LngnUtS9orRIqs",i=a&&n?(0,r.UU)(a,n):null},8554:(e,t,s)=>{Promise.resolve().then(s.bind(s,4081))}},e=>{e.O(0,[174,798,552,441,255,358],()=>e(e.s=8554)),_N_E=e.O()}]);