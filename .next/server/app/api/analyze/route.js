"use strict";(()=>{var e={};e.id=652,e.ids=[652],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3800:(e,t,n)=>{n.r(t),n.d(t,{originalPathname:()=>m,patchFetch:()=>h,requestAsyncStorage:()=>d,routeModule:()=>c,serverHooks:()=>g,staticGenerationAsyncStorage:()=>l});var r={};n.r(r),n.d(r,{POST:()=>p});var s=n(9303),a=n(8716),i=n(670),o=n(7070),u=n(1258);async function p(e){try{let{sourceIds:t}=await e.json();if(!t||0===t.length)return o.NextResponse.json({insights:[]});let n=process.env.GOOGLE_GEMINI_API_KEY;if(!n)return console.warn("GOOGLE_GEMINI_API_KEY not found. Using Mock Mode."),await new Promise(e=>setTimeout(e,1500)),o.NextResponse.json({insights:["73% of users report difficulties with feature prioritization in the current workflow.","The manual synthesis of customer interviews is currently taking an average of 12 hours per sprint.","Users are requesting a more direct connection between customer feedback and development planning.","Automated feedback categorization is the most requested 'efficiency' feature among power users."]});let r=new u.$D(n).getGenerativeModel({model:"gemini-1.5-flash"}),s=`You are a product management assistant. Based on the following source identifiers (which represent customer interviews, reviews, and documents): ${t.join(", ")}.
    Generate 4 concise, actionable, and data-driven insights for a product team. 
    Return the response as a valid JSON object with a single key 'insights' containing an array of 4 strings.
    Example: {"insights": ["Insight 1", "Insight 2", "Insight 3", "Insight 4"]}`,a=await r.generateContent(s),i=(await a.response).text().replace(/```json|```/g,"").trim(),p=JSON.parse(i);return o.NextResponse.json(p)}catch(e){return console.error("Gemini Analysis Error:",e),o.NextResponse.json({message:e.message},{status:500})}}let c=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/analyze/route",pathname:"/api/analyze",filename:"route",bundlePath:"app/api/analyze/route"},resolvedPagePath:"/Users/redbar/Documents/GitHub/TofuOS/src/app/api/analyze/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:d,staticGenerationAsyncStorage:l,serverHooks:g}=c,m="/api/analyze/route";function h(){return(0,i.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:l})}}};var t=require("../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[276,972,258],()=>n(3800));module.exports=r})();