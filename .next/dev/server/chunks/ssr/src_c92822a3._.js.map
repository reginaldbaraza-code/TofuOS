{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/redbar/Documents/GitHub/TofuOS/src/components/TopBar.tsx"],"sourcesContent":["import { Plus, BarChart3, Share2, Settings, ChevronDown, LogOut } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { useAuth } from \"@/contexts/AuthContext\";\n\nconst outputTypes = [\n  \"PRD\",\n  \"AI Coding Rules & Standards\",\n  \"API Documentation\",\n  \"Accessibility Compliance Checklist\",\n  \"App Architecture Plan\",\n  \"Bug Investigation & Fix Plan\",\n  \"Competitive Analysis Report\",\n  \"Customer Journey Map\",\n  \"Database Schema Design\",\n  \"Feature Implementation Spec\",\n  \"Go-to-Market Plan\",\n];\n\nconst TopBar = () => {\n  const { user, signOut } = useAuth();\n  const [dropdownOpen, setDropdownOpen] = useState(false);\n  const [selectedType, setSelectedType] = useState(\"PRD\");\n\n  return (\n    <header className=\"h-14 border-b border-border flex items-center justify-between px-3 md:px-4 panel-bg relative z-50\">\n      <div className=\"flex items-center gap-2 md:gap-3 min-w-0\">\n        {/* Logo */}\n        <div className=\"flex items-center gap-2 flex-shrink-0\">\n          <div className=\"w-8 h-8 rounded-lg tofu-gradient flex items-center justify-center\">\n            <span className=\"text-primary-foreground font-bold text-sm\">ðŸ§Š</span>\n          </div>\n          <span className=\"font-semibold text-foreground text-sm tracking-tight hidden sm:inline\">tofuOS</span>\n        </div>\n\n        <div className=\"w-px h-6 bg-border mx-1 hidden sm:block\" />\n\n        {/* Output Type Dropdown */}\n        <div className=\"relative\">\n          <button\n            onClick={() => setDropdownOpen(!dropdownOpen)}\n            className=\"flex items-center gap-1.5 px-2 md:px-3 py-1.5 text-sm text-foreground hover:bg-muted rounded-lg transition-colors truncate\"\n          >\n            <span className=\"text-muted-foreground text-xs hidden sm:inline\">ChatPRD:</span>\n            <span className=\"font-medium truncate max-w-[120px] md:max-w-none\">{selectedType}</span>\n            <ChevronDown className=\"w-3.5 h-3.5 text-muted-foreground flex-shrink-0\" />\n          </button>\n\n          {dropdownOpen && (\n            <>\n              <div className=\"fixed inset-0\" onClick={() => setDropdownOpen(false)} />\n              <div className=\"absolute top-full left-0 mt-1 w-72 panel-bg border border-border rounded-xl shadow-lg py-1 max-h-80 overflow-y-auto\">\n                {outputTypes.map((type) => (\n                  <button\n                    key={type}\n                    onClick={() => {\n                      setSelectedType(type);\n                      setDropdownOpen(false);\n                    }}\n                    className={`w-full text-left px-4 py-2.5 text-sm hover:bg-muted transition-colors flex items-center gap-2 ${\n                      selectedType === type ? \"text-foreground font-medium\" : \"text-muted-foreground\"\n                    }`}\n                  >\n                    {selectedType === type && (\n                      <svg className=\"w-4 h-4 text-primary flex-shrink-0\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2.5\"><polyline points=\"20 6 9 17 4 12\"/></svg>\n                    )}\n                    <span className={selectedType !== type ? \"ml-6\" : \"\"}>\n                      ChatPRD: {type}\n                    </span>\n                  </button>\n                ))}\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n\n      <div className=\"flex items-center gap-1 flex-shrink-0\">\n        <button className=\"hidden md:flex items-center gap-2 px-3 py-1.5 tofu-gradient text-primary-foreground rounded-lg text-sm font-medium hover:opacity-90 transition-opacity\">\n          <Plus className=\"w-4 h-4\" />\n          New Project\n        </button>\n        <button className=\"md:hidden p-2 tofu-gradient text-primary-foreground rounded-lg hover:opacity-90 transition-opacity\">\n          <Plus className=\"w-4 h-4\" />\n        </button>\n        <button className=\"hidden md:flex items-center gap-2 px-3 py-1.5 text-sm text-foreground hover:bg-muted rounded-lg transition-colors\">\n          <BarChart3 className=\"w-4 h-4\" />\n          Analytics\n        </button>\n        <button className=\"hidden md:flex items-center gap-2 px-3 py-1.5 text-sm text-foreground hover:bg-muted rounded-lg transition-colors\">\n          <Share2 className=\"w-4 h-4\" />\n          Share\n        </button>\n        <button className=\"hidden md:flex items-center gap-2 px-3 py-1.5 text-sm text-foreground hover:bg-muted rounded-lg transition-colors\">\n          <Settings className=\"w-4 h-4\" />\n          Settings\n        </button>\n        <div className=\"hidden sm:flex gap-1\">\n          <button className=\"md:hidden p-2 text-foreground hover:bg-muted rounded-lg transition-colors\">\n            <Settings className=\"w-4 h-4\" />\n          </button>\n        </div>\n        <button\n          onClick={signOut}\n          className=\"hidden md:flex items-center gap-2 px-3 py-1.5 text-sm text-muted-foreground hover:text-foreground hover:bg-muted rounded-lg transition-colors\"\n          title=\"Sign out\"\n        >\n          <LogOut className=\"w-4 h-4\" />\n          Sign out\n        </button>\n        <div className=\"w-8 h-8 rounded-full tofu-gradient ml-1 md:ml-2 flex-shrink-0 flex items-center justify-center text-primary-foreground text-xs font-medium\" title={user?.email}>\n          {user?.user_metadata?.display_name?.charAt(0) ?? user?.email?.charAt(0) ?? \"?\"}\n        </div>\n      </div>\n    </header>\n  );\n};\n\nexport default TopBar;\n"],"names":[],"mappings":";;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;;;;;AAEA,MAAM,cAAc;IAClB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAED,MAAM,SAAS;IACb,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,IAAA,0IAAO;IACjC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IAEjD,qBACE,8OAAC;QAAO,WAAU;;0BAChB,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCAAK,WAAU;8CAA4C;;;;;;;;;;;0CAE9D,8OAAC;gCAAK,WAAU;0CAAwE;;;;;;;;;;;;kCAG1F,8OAAC;wBAAI,WAAU;;;;;;kCAGf,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCACC,SAAS,IAAM,gBAAgB,CAAC;gCAChC,WAAU;;kDAEV,8OAAC;wCAAK,WAAU;kDAAiD;;;;;;kDACjE,8OAAC;wCAAK,WAAU;kDAAoD;;;;;;kDACpE,8OAAC,mOAAW;wCAAC,WAAU;;;;;;;;;;;;4BAGxB,8BACC;;kDACE,8OAAC;wCAAI,WAAU;wCAAgB,SAAS,IAAM,gBAAgB;;;;;;kDAC9D,8OAAC;wCAAI,WAAU;kDACZ,YAAY,GAAG,CAAC,CAAC,qBAChB,8OAAC;gDAEC,SAAS;oDACP,gBAAgB;oDAChB,gBAAgB;gDAClB;gDACA,WAAW,CAAC,8FAA8F,EACxG,iBAAiB,OAAO,gCAAgC,yBACxD;;oDAED,iBAAiB,sBAChB,8OAAC;wDAAI,WAAU;wDAAqC,SAAQ;wDAAY,MAAK;wDAAO,QAAO;wDAAe,aAAY;kEAAM,cAAA,8OAAC;4DAAS,QAAO;;;;;;;;;;;kEAE/I,8OAAC;wDAAK,WAAW,iBAAiB,OAAO,SAAS;;4DAAI;4DAC1C;;;;;;;;+CAbP;;;;;;;;;;;;;;;;;;;;;;;;0BAuBnB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAO,WAAU;;0CAChB,8OAAC,0MAAI;gCAAC,WAAU;;;;;;4BAAY;;;;;;;kCAG9B,8OAAC;wBAAO,WAAU;kCAChB,cAAA,8OAAC,0MAAI;4BAAC,WAAU;;;;;;;;;;;kCAElB,8OAAC;wBAAO,WAAU;;0CAChB,8OAAC,+NAAS;gCAAC,WAAU;;;;;;4BAAY;;;;;;;kCAGnC,8OAAC;wBAAO,WAAU;;0CAChB,8OAAC,oNAAM;gCAAC,WAAU;;;;;;4BAAY;;;;;;;kCAGhC,8OAAC;wBAAO,WAAU;;0CAChB,8OAAC,sNAAQ;gCAAC,WAAU;;;;;;4BAAY;;;;;;;kCAGlC,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAO,WAAU;sCAChB,cAAA,8OAAC,sNAAQ;gCAAC,WAAU;;;;;;;;;;;;;;;;kCAGxB,8OAAC;wBACC,SAAS;wBACT,WAAU;wBACV,OAAM;;0CAEN,8OAAC,oNAAM;gCAAC,WAAU;;;;;;4BAAY;;;;;;;kCAGhC,8OAAC;wBAAI,WAAU;wBAA6I,OAAO,MAAM;kCACtK,MAAM,eAAe,cAAc,OAAO,MAAM,MAAM,OAAO,OAAO,MAAM;;;;;;;;;;;;;;;;;;AAKrF;uCAEe"}},
    {"offset": {"line": 344, "column": 0}, "map": {"version":3,"sources":["file:///Users/redbar/Documents/GitHub/TofuOS/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB"}},
    {"offset": {"line": 359, "column": 0}, "map": {"version":3,"sources":["file:///Users/redbar/Documents/GitHub/TofuOS/src/components/ui/dialog.tsx"],"sourcesContent":["import * as React from \"react\";\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\";\nimport { X } from \"lucide-react\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst Dialog = DialogPrimitive.Root;\n\nconst DialogTrigger = DialogPrimitive.Trigger;\n\nconst DialogPortal = DialogPrimitive.Portal;\n\nconst DialogClose = DialogPrimitive.Close;\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className,\n    )}\n    {...props}\n  />\n));\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName;\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className,\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n));\nDialogContent.displayName = DialogPrimitive.Content.displayName;\n\nconst DialogHeader = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => (\n  <div className={cn(\"flex flex-col space-y-1.5 text-center sm:text-left\", className)} {...props} />\n);\nDialogHeader.displayName = \"DialogHeader\";\n\nconst DialogFooter = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => (\n  <div className={cn(\"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\", className)} {...props} />\n);\nDialogFooter.displayName = \"DialogFooter\";\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold leading-none tracking-tight\", className)}\n    {...props}\n  />\n));\nDialogTitle.displayName = DialogPrimitive.Title.displayName;\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description ref={ref} className={cn(\"text-sm text-muted-foreground\", className)} {...props} />\n));\nDialogDescription.displayName = DialogPrimitive.Description.displayName;\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,SAAS,0KAAoB;AAEnC,MAAM,gBAAgB,6KAAuB;AAE7C,MAAM,eAAe,4KAAsB;AAE3C,MAAM,cAAc,2KAAqB;AAEzC,MAAM,8BAAgB,mNAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,6KAAuB;QACtB,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;AAGb,cAAc,WAAW,GAAG,6KAAuB,CAAC,WAAW;AAE/D,MAAM,8BAAgB,mNAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC;;0BACC,8OAAC;;;;;0BACD,8OAAC,6KAAuB;gBACtB,KAAK;gBACL,WAAW,IAAA,yHAAE,EACX,+fACA;gBAED,GAAG,KAAK;;oBAER;kCACD,8OAAC,2KAAqB;wBAAC,WAAU;;0CAC/B,8OAAC,iMAAC;gCAAC,WAAU;;;;;;0CACb,8OAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAKlC,cAAc,WAAW,GAAG,6KAAuB,CAAC,WAAW;AAE/D,MAAM,eAAe,CAAC,EAAE,SAAS,EAAE,GAAG,OAA6C,iBACjF,8OAAC;QAAI,WAAW,IAAA,yHAAE,EAAC,sDAAsD;QAAa,GAAG,KAAK;;;;;;AAEhG,aAAa,WAAW,GAAG;AAE3B,MAAM,eAAe,CAAC,EAAE,SAAS,EAAE,GAAG,OAA6C,iBACjF,8OAAC;QAAI,WAAW,IAAA,yHAAE,EAAC,iEAAiE;QAAa,GAAG,KAAK;;;;;;AAE3G,aAAa,WAAW,GAAG;AAE3B,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,2KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,qDAAqD;QAClE,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,2KAAqB,CAAC,WAAW;AAE3D,MAAM,kCAAoB,mNAAgB,CAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iLAA2B;QAAC,KAAK;QAAK,WAAW,IAAA,yHAAE,EAAC,iCAAiC;QAAa,GAAG,KAAK;;;;;;AAE7G,kBAAkB,WAAW,GAAG,iLAA2B,CAAC,WAAW"}},
    {"offset": {"line": 498, "column": 0}, "map": {"version":3,"sources":["file:///Users/redbar/Documents/GitHub/TofuOS/src/components/ui/label.tsx"],"sourcesContent":["import * as React from \"react\";\nimport * as LabelPrimitive from \"@radix-ui/react-label\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst labelVariants = cva(\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\");\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> & VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root ref={ref} className={cn(labelVariants(), className)} {...props} />\n));\nLabel.displayName = LabelPrimitive.Root.displayName;\n\nexport { Label };\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,gBAAgB,IAAA,uKAAG,EAAC;AAE1B,MAAM,sBAAQ,mNAAgB,CAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,yKAAmB;QAAC,KAAK;QAAK,WAAW,IAAA,yHAAE,EAAC,iBAAiB;QAAa,GAAG,KAAK;;;;;;AAErF,MAAM,WAAW,GAAG,yKAAmB,CAAC,WAAW"}},
    {"offset": {"line": 528, "column": 0}, "map": {"version":3,"sources":["file:///Users/redbar/Documents/GitHub/TofuOS/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className,\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  },\n);\nInput.displayName = \"Input\";\n\nexport { Input };\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,mNAAgB,CAC5B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,8OAAC;QACC,MAAM;QACN,WAAW,IAAA,yHAAE,EACX,kYACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 556, "column": 0}, "map": {"version":3,"sources":["file:///Users/redbar/Documents/GitHub/TofuOS/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { Slot } from \"@radix-ui/react-slot\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive: \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline: \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary: \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n);\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean;\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\";\n    return <Comp className={cn(buttonVariants({ variant, size, className }))} ref={ref} {...props} />;\n  },\n);\nButton.displayName = \"Button\";\n\nexport { Button, buttonVariants };\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,4VACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aAAa;YACb,SAAS;YACT,WAAW;YACX,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,mNAAgB,CAC7B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,wKAAI,GAAG;IAC9B,qBAAO,8OAAC;QAAK,WAAW,IAAA,yHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QAAK,KAAK;QAAM,GAAG,KAAK;;;;;;AAC/F;AAEF,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 616, "column": 0}, "map": {"version":3,"sources":["file:///Users/redbar/Documents/GitHub/TofuOS/src/components/ui/tabs.tsx"],"sourcesContent":["import * as React from \"react\";\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst Tabs = TabsPrimitive.Root;\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className,\n    )}\n    {...props}\n  />\n));\nTabsList.displayName = TabsPrimitive.List.displayName;\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\",\n      className,\n    )}\n    {...props}\n  />\n));\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName;\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className,\n    )}\n    {...props}\n  />\n));\nTabsContent.displayName = TabsPrimitive.Content.displayName;\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent };\n"],"names":[],"mappings":";;;;;;;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,OAAO,wKAAkB;AAE/B,MAAM,yBAAW,mNAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,wKAAkB;QACjB,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,8FACA;QAED,GAAG,KAAK;;;;;;AAGb,SAAS,WAAW,GAAG,wKAAkB,CAAC,WAAW;AAErD,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,2KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,uYACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,2KAAqB,CAAC,WAAW;AAE3D,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,2KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,mIACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,2KAAqB,CAAC,WAAW"}},
    {"offset": {"line": 670, "column": 0}, "map": {"version":3,"sources":["file:///Users/redbar/Documents/GitHub/TofuOS/src/components/ui/radio-group.tsx"],"sourcesContent":["import * as React from \"react\";\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\";\nimport { Circle } from \"lucide-react\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return <RadioGroupPrimitive.Root className={cn(\"grid gap-2\", className)} {...props} ref={ref} />;\n});\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName;\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className,\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  );\n});\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName;\n\nexport { RadioGroup, RadioGroupItem };\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IAC1B,qBAAO,8OAAC,kLAAwB;QAAC,WAAW,IAAA,yHAAE,EAAC,cAAc;QAAa,GAAG,KAAK;QAAE,KAAK;;;;;;AAC3F;AACA,WAAW,WAAW,GAAG,kLAAwB,CAAC,WAAW;AAE7D,MAAM,+BAAiB,mNAAgB,CAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IAC1B,qBACE,8OAAC,kLAAwB;QACvB,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,4OACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,uLAA6B;YAAC,WAAU;sBACvC,cAAA,8OAAC,gNAAM;gBAAC,WAAU;;;;;;;;;;;;;;;;AAI1B;AACA,eAAe,WAAW,GAAG,kLAAwB,CAAC,WAAW"}},
    {"offset": {"line": 729, "column": 0}, "map": {"version":3,"sources":["file:///Users/redbar/Documents/GitHub/TofuOS/src/components/AddSourcesModal.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useRef } from \"react\";\nimport { Star, FileText, Smartphone } from \"lucide-react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n} from \"@/components/ui/dialog\";\nimport { Label } from \"@/components/ui/label\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\nimport { cn } from \"@/lib/utils\";\n\nexport type StoreType = \"play\" | \"apple\";\n\nexport interface AddSourcesModalProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onAddReviews?: (store: StoreType, appPageUrl: string) => void | Promise<void>;\n  onAddDocuments?: (files: File[]) => void | Promise<void>;\n}\n\nconst ACCEPT_DOCUMENTS = \".pdf,.doc,.docx,.xls,.xlsx\";\n\nconst AddSourcesModal = ({\n  open,\n  onOpenChange,\n  onAddReviews,\n  onAddDocuments,\n}: AddSourcesModalProps) => {\n  const [reviewsStore, setReviewsStore] = useState<StoreType>(\"play\");\n  const [reviewsUrl, setReviewsUrl] = useState(\"\");\n  const [reviewsError, setReviewsError] = useState<string | null>(null);\n  const [reviewsSubmitting, setReviewsSubmitting] = useState(false);\n\n  const [documentFiles, setDocumentFiles] = useState<File[]>([]);\n  const [documentsError, setDocumentsError] = useState<string | null>(null);\n  const [documentsSubmitting, setDocumentsSubmitting] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const handleAddReviews = async () => {\n    setReviewsError(null);\n    const url = reviewsUrl.trim();\n    if (!url) {\n      setReviewsError(\"Please enter an app page URL.\");\n      return;\n    }\n    const isPlay = url.includes(\"play.google.com\") || reviewsStore === \"play\";\n    const isApple = url.includes(\"apps.apple.com\") || url.includes(\"itunes.apple.com\") || reviewsStore === \"apple\";\n    if (!isPlay && !isApple) {\n      setReviewsError(\"Please enter a valid Play Store or App Store app page URL.\");\n      return;\n    }\n    setReviewsSubmitting(true);\n    try {\n      await onAddReviews?.(reviewsStore, url);\n      setReviewsUrl(\"\");\n      setReviewsError(null);\n      onOpenChange(false);\n    } catch (e) {\n      setReviewsError(e instanceof Error ? e.message : \"Failed to add reviews source\");\n    } finally {\n      setReviewsSubmitting(false);\n    }\n  };\n\n  const handleDocumentSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = Array.from(e.target.files ?? []);\n    const valid = files.filter(\n      (f) =>\n        f.name.endsWith(\".pdf\") ||\n        f.name.endsWith(\".doc\") ||\n        f.name.endsWith(\".docx\") ||\n        f.name.endsWith(\".xls\") ||\n        f.name.endsWith(\".xlsx\")\n    );\n    setDocumentFiles((prev) => [...prev, ...valid]);\n    setDocumentsError(null);\n    if (fileInputRef.current) fileInputRef.current.value = \"\";\n  };\n\n  const removeDocument = (index: number) => {\n    setDocumentFiles((prev) => prev.filter((_, i) => i !== index));\n  };\n\n  const handleAddDocuments = async () => {\n    setDocumentsError(null);\n    if (documentFiles.length === 0) {\n      setDocumentsError(\"Please select at least one file (Word, PDF, or Excel).\");\n      return;\n    }\n    setDocumentsSubmitting(true);\n    try {\n      await onAddDocuments?.(documentFiles);\n      setDocumentFiles([]);\n      onOpenChange(false);\n    } catch (e) {\n      setDocumentsError(e instanceof Error ? e.message : \"Failed to upload documents\");\n    } finally {\n      setDocumentsSubmitting(false);\n    }\n  };\n\n  const resetOnClose = (open: boolean) => {\n    if (!open) {\n      setReviewsUrl(\"\");\n      setReviewsError(null);\n      setDocumentFiles([]);\n      setDocumentsError(null);\n    }\n    onOpenChange(open);\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={resetOnClose}>\n      <DialogContent className=\"sm:max-w-md\">\n        <DialogHeader>\n          <DialogTitle>Add sources</DialogTitle>\n          <DialogDescription>\n            Choose a source type and add app reviews or documents to your project.\n          </DialogDescription>\n        </DialogHeader>\n\n        <Tabs defaultValue=\"reviews\" className=\"w-full\">\n          <TabsList className=\"grid w-full grid-cols-2\">\n            <TabsTrigger value=\"reviews\" className=\"flex items-center gap-2\">\n              <Star className=\"w-4 h-4\" />\n              Reviews\n            </TabsTrigger>\n            <TabsTrigger value=\"documents\" className=\"flex items-center gap-2\">\n              <FileText className=\"w-4 h-4\" />\n              Documents\n            </TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"reviews\" className=\"space-y-4 mt-4\">\n            <p className=\"text-sm text-muted-foreground\">\n              Collect app reviews from a Google Play Store or Apple App Store app page.\n            </p>\n            <div className=\"space-y-2\">\n              <Label>Store</Label>\n              <RadioGroup\n                value={reviewsStore}\n                onValueChange={(v) => setReviewsStore(v as StoreType)}\n                className=\"flex gap-4\"\n              >\n                <label className=\"flex items-center gap-2 cursor-pointer\">\n                  <RadioGroupItem value=\"play\" />\n                  <Smartphone className=\"w-4 h-4 text-muted-foreground\" />\n                  <span className=\"text-sm\">Play Store</span>\n                </label>\n                <label className=\"flex items-center gap-2 cursor-pointer\">\n                  <RadioGroupItem value=\"apple\" />\n                  <span className=\"text-sm\">App Store</span>\n                </label>\n              </RadioGroup>\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"reviews-url\">App page URL</Label>\n              <Input\n                id=\"reviews-url\"\n                type=\"url\"\n                placeholder={\n                  reviewsStore === \"play\"\n                    ? \"https://play.google.com/store/apps/details?id=...\"\n                    : \"https://apps.apple.com/app/id...\"\n                }\n                value={reviewsUrl}\n                onChange={(e) => {\n                  setReviewsUrl(e.target.value);\n                  setReviewsError(null);\n                }}\n                className={cn(reviewsError && \"border-destructive\")}\n              />\n              {reviewsError && (\n                <p className=\"text-sm text-destructive\">{reviewsError}</p>\n              )}\n            </div>\n            <Button\n              onClick={handleAddReviews}\n              disabled={reviewsSubmitting}\n              className=\"w-full tofu-gradient text-primary-foreground hover:opacity-90\"\n            >\n              {reviewsSubmitting ? \"Addingâ€¦\" : \"Add reviews source\"}\n            </Button>\n          </TabsContent>\n\n          <TabsContent value=\"documents\" className=\"space-y-4 mt-4\">\n            <p className=\"text-sm text-muted-foreground\">\n              Upload Word (.doc, .docx), PDF, or Excel (.xls, .xlsx) files.\n            </p>\n            <div className=\"space-y-2\">\n              <Label>Files</Label>\n              <input\n                ref={fileInputRef}\n                type=\"file\"\n                accept={ACCEPT_DOCUMENTS}\n                multiple\n                onChange={handleDocumentSelect}\n                className=\"hidden\"\n              />\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                className=\"w-full border-dashed\"\n                onClick={() => fileInputRef.current?.click()}\n              >\n                Choose Word, PDF, or Excel files\n              </Button>\n              {documentFiles.length > 0 && (\n                <ul className=\"text-sm space-y-1 mt-2\">\n                  {documentFiles.map((file, i) => (\n                    <li\n                      key={`${file.name}-${i}`}\n                      className=\"flex items-center justify-between gap-2 py-1 px-2 rounded bg-muted\"\n                    >\n                      <span className=\"truncate text-foreground\">{file.name}</span>\n                      <button\n                        type=\"button\"\n                        onClick={() => removeDocument(i)}\n                        className=\"text-muted-foreground hover:text-destructive shrink-0\"\n                        aria-label={`Remove ${file.name}`}\n                      >\n                        Ã—\n                      </button>\n                    </li>\n                  ))}\n                </ul>\n              )}\n              {documentsError && (\n                <p className=\"text-sm text-destructive\">{documentsError}</p>\n              )}\n            </div>\n            <Button\n              onClick={handleAddDocuments}\n              disabled={documentFiles.length === 0 || documentsSubmitting}\n              className=\"w-full tofu-gradient text-primary-foreground hover:opacity-90\"\n            >\n              {documentsSubmitting ? \"Uploadingâ€¦\" : \"Add documents\"}\n            </Button>\n          </TabsContent>\n        </Tabs>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default AddSourcesModal;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1190, "column": 0}, "map": {"version":3,"sources":["file:///Users/redbar/Documents/GitHub/TofuOS/src/lib/api.ts"],"sourcesContent":["/**\n * API client for tofuOS - Supabase and OpenAI implementation.\n */\nimport { supabase } from './supabase/client';\n\nexport interface Source {\n  id: string;\n  name: string;\n  type: \"pdf\" | \"link\" | \"transcript\" | \"reviews\" | \"document\";\n  selected: boolean;\n  meta?: { store?: \"play\" | \"apple\"; url?: string; fileId?: string };\n  user_id?: string;\n}\n\nexport async function fetchSources(): Promise<Source[]> {\n  const { data, error } = await supabase\n    .from('sources')\n    .select('*')\n    .order('created_at', { ascending: true });\n\n  if (error) {\n    console.error('Error fetching sources:', error);\n    return [];\n  }\n  return data as Source[];\n}\n\nexport async function updateSources(sources: Source[]): Promise<Source[]> {\n  // In a real DB, we might want to update individually, but for a mock-to-real migration,\n  // we'll handle the 'selected' status updates.\n  for (const source of sources) {\n    await supabase\n      .from('sources')\n      .update({ selected: source.selected })\n      .eq('id', source.id);\n  }\n  return sources;\n}\n\nexport async function addReviewsSource(\n  store: \"play\" | \"apple\",\n  appPageUrl: string\n): Promise<Source> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) throw new Error(\"Not authenticated\");\n\n  const newSource = {\n    name: `${store === \"play\" ? \"Play Store\" : \"App Store\"} Reviews`,\n    type: \"reviews\",\n    selected: true,\n    meta: { store, url: appPageUrl },\n    user_id: user.id\n  };\n\n  const { data, error } = await supabase\n    .from('sources')\n    .insert(newSource)\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data as Source;\n}\n\nexport async function addDocumentSources(files: File[]): Promise<Source[]> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) throw new Error(\"Not authenticated\");\n\n  const newSources = files.map((file) => ({\n    name: file.name,\n    type: file.name.toLowerCase().endsWith(\".pdf\") ? \"pdf\" : \"document\",\n    selected: true,\n    user_id: user.id\n  }));\n\n  const { data, error } = await supabase\n    .from('sources')\n    .insert(newSources)\n    .select();\n\n  if (error) throw error;\n  return data as Source[];\n}\n\n// --- Analyze (AI PM insights) ---\nexport async function analyzeSources(sourceIds: string[]): Promise<{ insights: string[] }> {\n  const response = await fetch('/api/analyze', {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify({ sourceIds }),\n  });\n\n  if (!response.ok) {\n    const error = await response.json();\n    throw new Error(error.message || 'Analysis failed');\n  }\n\n  return response.json();\n}\n\n// --- Conversational Chat with AI ---\nexport async function chatWithAI(\n  message: string, \n  sourceIds: string[], \n  history: { role: \"user\" | \"assistant\"; content: string }[]\n): Promise<{ content: string }> {\n  const response = await fetch('/api/chat', {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify({ message, sourceIds, history }),\n  });\n\n  if (!response.ok) {\n    const error = await response.json();\n    throw new Error(error.message || 'Chat failed');\n  }\n\n  return response.json();\n}\n\n// --- Jira ---\nexport interface JiraConfig {\n  configured: boolean;\n  domain?: string;\n  email?: string;\n  hasToken?: boolean;\n  lastProjectKey?: string;\n}\n\nexport async function getJiraConfig(): Promise<JiraConfig | null> {\n  const { data, error } = await supabase\n    .from('jira_configs')\n    .select('*')\n    .single();\n\n  if (error && error.code !== 'PGRST116') { // PGRST116 is 'no rows found'\n    console.error('Error fetching Jira config:', error);\n    return { configured: false };\n  }\n\n  if (!data) return { configured: false };\n\n  return { \n    ...data, \n    configured: true, \n    hasToken: !!data.api_token,\n    lastProjectKey: data.last_project_key\n  };\n}\n\nexport async function saveJiraConfig(domain: string, email: string, apiToken: string): Promise<void> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) throw new Error(\"Not authenticated\");\n\n  const { error } = await supabase\n    .from('jira_configs')\n    .upsert({ \n      domain, \n      email, \n      api_token: apiToken,\n      user_id: user.id \n    }, {\n      onConflict: 'user_id'\n    });\n\n  if (error) throw error;\n}\n\nexport async function createJiraIssue(params: {\n  summary: string;\n  description?: string;\n  projectKey?: string;\n  issueType?: string;\n}): Promise<{ key: string; id: string; url: string }> {\n  // Pass the access token to the server route\n  const { data: { session } } = await supabase.auth.getSession();\n  \n  const response = await fetch('/api/jira/create-issue', {\n    method: 'POST',\n    headers: { \n      'Content-Type': 'application/json',\n      ...(session?.access_token ? { 'Authorization': `Bearer ${session.access_token}` } : {})\n    },\n    body: JSON.stringify(params),\n  });\n\n  if (!response.ok) {\n    const error = await response.json();\n    throw new Error(error.message || 'Failed to create Jira issue');\n  }\n\n  return response.json();\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1352, "column": 0}, "map": {"version":3,"sources":["file:///Users/redbar/Documents/GitHub/TofuOS/src/components/SourcesPanel.tsx"],"sourcesContent":["'use client';\n\nimport { Plus, Search, FileText, Link, Star, FileSpreadsheet } from \"lucide-react\";\nimport { useState, useEffect, useCallback } from \"react\";\nimport AddSourcesModal from \"@/components/AddSourcesModal\";\nimport type { StoreType } from \"@/components/AddSourcesModal\";\nimport { useAuth } from \"@/contexts/AuthContext\";\nimport {\n  fetchSources,\n  updateSources,\n  addReviewsSource,\n  addDocumentSources,\n  type Source,\n} from \"@/lib/api\";\n\nconst SourcesPanel = ({ mobile }: { mobile?: boolean }) => {\n  const { isAuthenticated } = useAuth();\n  const [sources, setSources] = useState<Source[]>([]);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [addModalOpen, setAddModalOpen] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  const loadSources = useCallback(async () => {\n    if (!isAuthenticated) return;\n    setLoading(true);\n    setError(null);\n    try {\n      const list = await fetchSources();\n      setSources(list);\n    } catch (e) {\n      setError(e instanceof Error ? e.message : \"Failed to load sources\");\n      setSources([]);\n    } finally {\n      setLoading(false);\n    }\n  }, [isAuthenticated]);\n\n  useEffect(() => {\n    loadSources();\n  }, [loadSources]);\n\n  const toggleSource = async (id: string) => {\n    const next = sources.map((s) => (s.id === id ? { ...s, selected: !s.selected } : s));\n    setSources(next);\n    try {\n      const saved = await updateSources(next);\n      setSources(saved);\n    } catch {\n      setSources(sources);\n    }\n  };\n\n  const allSelected = sources.length > 0 && sources.every((s) => s.selected);\n  const toggleAll = async () => {\n    const next = sources.map((s) => ({ ...s, selected: !allSelected }));\n    setSources(next);\n    try {\n      const saved = await updateSources(next);\n      setSources(saved);\n    } catch {\n      setSources(sources);\n    }\n  };\n\n  const iconForType = (type: Source[\"type\"]) => {\n    switch (type) {\n      case \"pdf\": return <FileText className=\"w-4 h-4 text-destructive\" />;\n      case \"link\": return <Link className=\"w-4 h-4 text-primary\" />;\n      case \"transcript\": return <FileText className=\"w-4 h-4 text-tofu-warm\" />;\n      case \"reviews\": return <Star className=\"w-4 h-4 text-amber-500\" />;\n      case \"document\": return <FileSpreadsheet className=\"w-4 h-4 text-emerald-600\" />;\n    }\n  };\n\n  const handleAddReviews = async (store: StoreType, appPageUrl: string) => {\n    try {\n      await addReviewsSource(store, appPageUrl);\n      await loadSources();\n    } catch (e) {\n      throw e;\n    }\n  };\n\n  const handleAddDocuments = async (files: File[]) => {\n    try {\n      await addDocumentSources(files);\n      await loadSources();\n    } catch (e) {\n      throw e;\n    }\n  };\n\n  return (\n    <aside className={`${mobile ? \"w-full h-full\" : \"w-72 min-w-[280px] border-r\"} border-border flex flex-col panel-bg pb-safe`}>\n      <div className=\"p-4 border-b border-border flex items-center justify-between\">\n        <h2 className=\"text-sm font-semibold text-foreground\">Sources</h2>\n        <button className=\"p-1 rounded hover:bg-muted transition-colors\">\n          <svg className=\"w-4 h-4 text-muted-foreground\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\"><rect x=\"3\" y=\"3\" width=\"7\" height=\"7\"/><rect x=\"14\" y=\"3\" width=\"7\" height=\"7\"/><rect x=\"3\" y=\"14\" width=\"7\" height=\"7\"/><rect x=\"14\" y=\"14\" width=\"7\" height=\"7\"/></svg>\n        </button>\n      </div>\n\n      <div className=\"p-3\">\n        <button\n          onClick={() => setAddModalOpen(true)}\n          className=\"w-full flex items-center justify-center gap-2 py-2.5 px-4 border border-dashed border-border rounded-lg text-sm text-muted-foreground hover:bg-muted hover:text-foreground transition-colors\"\n        >\n          <Plus className=\"w-4 h-4\" />\n          Add Sources\n        </button>\n        <AddSourcesModal\n          open={addModalOpen}\n          onOpenChange={setAddModalOpen}\n          onAddReviews={handleAddReviews}\n          onAddDocuments={handleAddDocuments}\n        />\n      </div>\n\n      <div className=\"px-3 pb-2\">\n        <div className=\"relative\">\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n          <input\n            type=\"text\"\n            placeholder=\"Search sources...\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            className=\"w-full pl-9 pr-3 py-2 text-sm bg-muted rounded-lg border-none outline-none focus:ring-2 focus:ring-ring text-foreground placeholder:text-muted-foreground\"\n          />\n        </div>\n      </div>\n\n      <div className=\"px-3 pb-2\">\n        <button\n          onClick={toggleAll}\n          className=\"flex items-center gap-2 text-xs text-muted-foreground hover:text-foreground transition-colors\"\n        >\n          <div className={`w-4 h-4 rounded border flex items-center justify-center transition-colors ${allSelected ? \"bg-primary border-primary\" : \"border-border\"}`}>\n            {allSelected && <svg className=\"w-3 h-3 text-primary-foreground\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"3\"><polyline points=\"20 6 9 17 4 12\"/></svg>}\n          </div>\n          Select All Sources\n        </button>\n      </div>\n\n      <div className=\"flex-1 overflow-y-auto px-3 space-y-1\">\n        {loading ? (\n          <p className=\"text-sm text-muted-foreground py-4 text-center\">Loading sourcesâ€¦</p>\n        ) : error ? (\n          <p className=\"text-sm text-destructive py-4 text-center\">{error}</p>\n        ) : (\n          sources\n          .filter((s) => s.name.toLowerCase().includes(searchQuery.toLowerCase()))\n          .map((source) => (\n            <div\n              key={source.id}\n              onClick={() => toggleSource(source.id)}\n              className=\"flex items-center gap-3 p-2 rounded-lg cursor-pointer hover:bg-muted transition-colors group\"\n            >\n              <div className={`w-4 h-4 rounded border flex-shrink-0 flex items-center justify-center transition-colors ${source.selected ? \"bg-primary border-primary\" : \"border-border\"}`}>\n                {source.selected && <svg className=\"w-3 h-3 text-primary-foreground\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"3\"><polyline points=\"20 6 9 17 4 12\"/></svg>}\n              </div>\n              {iconForType(source.type)}\n              <span className=\"text-sm truncate text-foreground\">{source.name}</span>\n            </div>\n          )))}\n      </div>\n    </aside>\n  );\n};\n\nexport default SourcesPanel;\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AAPA;;;;;;;AAeA,MAAM,eAAe,CAAC,EAAE,MAAM,EAAwB;IACpD,MAAM,EAAE,eAAe,EAAE,GAAG,IAAA,0IAAO;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAW,EAAE;IACnD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAElD,MAAM,cAAc,IAAA,oNAAW,EAAC;QAC9B,IAAI,CAAC,iBAAiB;QACtB,WAAW;QACX,SAAS;QACT,IAAI;YACF,MAAM,OAAO,MAAM,IAAA,iIAAY;YAC/B,WAAW;QACb,EAAE,OAAO,GAAG;YACV,SAAS,aAAa,QAAQ,EAAE,OAAO,GAAG;YAC1C,WAAW,EAAE;QACf,SAAU;YACR,WAAW;QACb;IACF,GAAG;QAAC;KAAgB;IAEpB,IAAA,kNAAS,EAAC;QACR;IACF,GAAG;QAAC;KAAY;IAEhB,MAAM,eAAe,OAAO;QAC1B,MAAM,OAAO,QAAQ,GAAG,CAAC,CAAC,IAAO,EAAE,EAAE,KAAK,KAAK;gBAAE,GAAG,CAAC;gBAAE,UAAU,CAAC,EAAE,QAAQ;YAAC,IAAI;QACjF,WAAW;QACX,IAAI;YACF,MAAM,QAAQ,MAAM,IAAA,kIAAa,EAAC;YAClC,WAAW;QACb,EAAE,OAAM;YACN,WAAW;QACb;IACF;IAEA,MAAM,cAAc,QAAQ,MAAM,GAAG,KAAK,QAAQ,KAAK,CAAC,CAAC,IAAM,EAAE,QAAQ;IACzE,MAAM,YAAY;QAChB,MAAM,OAAO,QAAQ,GAAG,CAAC,CAAC,IAAM,CAAC;gBAAE,GAAG,CAAC;gBAAE,UAAU,CAAC;YAAY,CAAC;QACjE,WAAW;QACX,IAAI;YACF,MAAM,QAAQ,MAAM,IAAA,kIAAa,EAAC;YAClC,WAAW;QACb,EAAE,OAAM;YACN,WAAW;QACb;IACF;IAEA,MAAM,cAAc,CAAC;QACnB,OAAQ;YACN,KAAK;gBAAO,qBAAO,8OAAC,0NAAQ;oBAAC,WAAU;;;;;;YACvC,KAAK;gBAAQ,qBAAO,8OAAC,0MAAI;oBAAC,WAAU;;;;;;YACpC,KAAK;gBAAc,qBAAO,8OAAC,0NAAQ;oBAAC,WAAU;;;;;;YAC9C,KAAK;gBAAW,qBAAO,8OAAC,0MAAI;oBAAC,WAAU;;;;;;YACvC,KAAK;gBAAY,qBAAO,8OAAC,+OAAe;oBAAC,WAAU;;;;;;QACrD;IACF;IAEA,MAAM,mBAAmB,OAAO,OAAkB;QAChD,IAAI;YACF,MAAM,IAAA,qIAAgB,EAAC,OAAO;YAC9B,MAAM;QACR,EAAE,OAAO,GAAG;YACV,MAAM;QACR;IACF;IAEA,MAAM,qBAAqB,OAAO;QAChC,IAAI;YACF,MAAM,IAAA,uIAAkB,EAAC;YACzB,MAAM;QACR,EAAE,OAAO,GAAG;YACV,MAAM;QACR;IACF;IAEA,qBACE,8OAAC;QAAM,WAAW,GAAG,SAAS,kBAAkB,8BAA8B,6CAA6C,CAAC;;0BAC1H,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAwC;;;;;;kCACtD,8OAAC;wBAAO,WAAU;kCAChB,cAAA,8OAAC;4BAAI,WAAU;4BAAgC,SAAQ;4BAAY,MAAK;4BAAO,QAAO;4BAAe,aAAY;;8CAAI,8OAAC;oCAAK,GAAE;oCAAI,GAAE;oCAAI,OAAM;oCAAI,QAAO;;;;;;8CAAK,8OAAC;oCAAK,GAAE;oCAAK,GAAE;oCAAI,OAAM;oCAAI,QAAO;;;;;;8CAAK,8OAAC;oCAAK,GAAE;oCAAI,GAAE;oCAAK,OAAM;oCAAI,QAAO;;;;;;8CAAK,8OAAC;oCAAK,GAAE;oCAAK,GAAE;oCAAK,OAAM;oCAAI,QAAO;;;;;;;;;;;;;;;;;;;;;;;0BAIxR,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,SAAS,IAAM,gBAAgB;wBAC/B,WAAU;;0CAEV,8OAAC,0MAAI;gCAAC,WAAU;;;;;;4BAAY;;;;;;;kCAG9B,8OAAC,gJAAe;wBACd,MAAM;wBACN,cAAc;wBACd,cAAc;wBACd,gBAAgB;;;;;;;;;;;;0BAIpB,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,gNAAM;4BAAC,WAAU;;;;;;sCAClB,8OAAC;4BACC,MAAK;4BACL,aAAY;4BACZ,OAAO;4BACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;4BAC9C,WAAU;;;;;;;;;;;;;;;;;0BAKhB,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBACC,SAAS;oBACT,WAAU;;sCAEV,8OAAC;4BAAI,WAAW,CAAC,0EAA0E,EAAE,cAAc,8BAA8B,iBAAiB;sCACvJ,6BAAe,8OAAC;gCAAI,WAAU;gCAAkC,SAAQ;gCAAY,MAAK;gCAAO,QAAO;gCAAe,aAAY;0CAAI,cAAA,8OAAC;oCAAS,QAAO;;;;;;;;;;;;;;;;wBACpJ;;;;;;;;;;;;0BAKV,8OAAC;gBAAI,WAAU;0BACZ,wBACC,8OAAC;oBAAE,WAAU;8BAAiD;;;;;+DAC5D,sBACF,8OAAC;oBAAE,WAAU;8BAA6C;;;;;+DAE1D,QACC,MAAM,CAAC,CAAC,IAAM,EAAE,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,YAAY,WAAW,KACnE,GAAG,CAAC,CAAC,uBACJ,8OAAC;wBAEC,SAAS,IAAM,aAAa,OAAO,EAAE;wBACrC,WAAU;;0CAEV,8OAAC;gCAAI,WAAW,CAAC,wFAAwF,EAAE,OAAO,QAAQ,GAAG,8BAA8B,iBAAiB;0CACzK,OAAO,QAAQ,kBAAI,8OAAC;oCAAI,WAAU;oCAAkC,SAAQ;oCAAY,MAAK;oCAAO,QAAO;oCAAe,aAAY;8CAAI,cAAA,8OAAC;wCAAS,QAAO;;;;;;;;;;;;;;;;4BAE7J,YAAY,OAAO,IAAI;0CACxB,8OAAC;gCAAK,WAAU;0CAAoC,OAAO,IAAI;;;;;;;uBAR1D,OAAO,EAAE;;;;;;;;;;;;;;;;AAc5B;uCAEe"}},
    {"offset": {"line": 1760, "column": 0}, "map": {"version":3,"sources":["file:///Users/redbar/Documents/GitHub/TofuOS/src/components/JiraConfigModal.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n} from \"@/components/ui/dialog\";\nimport { Label } from \"@/components/ui/label\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\n\ninterface JiraConfigModalProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onSaved: () => void;\n}\n\nexport default function JiraConfigModal({ open, onOpenChange, onSaved }: JiraConfigModalProps) {\n  const [domain, setDomain] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [apiToken, setApiToken] = useState(\"\");\n  const [error, setError] = useState<string | null>(null);\n  const [saving, setSaving] = useState(false);\n\n  const handleSave = async () => {\n    setError(null);\n    const d = domain.trim().replace(/^https?:\\/\\//, \"\").replace(/\\/$/, \"\");\n    if (!d || !email.trim() || !apiToken.trim()) {\n      setError(\"Domain, email, and API token are required.\");\n      return;\n    }\n    setSaving(true);\n    try {\n      const { saveJiraConfig } = await import(\"@/lib/api\");\n      await saveJiraConfig(d, email.trim(), apiToken.trim());\n      onSaved();\n      onOpenChange(false);\n      setDomain(\"\");\n      setEmail(\"\");\n      setApiToken(\"\");\n    } catch (e) {\n      setError(e instanceof Error ? e.message : \"Failed to save\");\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-md\">\n        <DialogHeader>\n          <DialogTitle>Jira configuration</DialogTitle>\n          <DialogDescription>\n            Connect your Jira to create tickets from insights. Use your Atlassian email and an{\" \"}\n            <a\n              href=\"https://id.atlassian.com/manage-profile/security/api-tokens\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"text-primary underline\"\n            >\n              API token\n            </a>\n            .\n          </DialogDescription>\n        </DialogHeader>\n        <div className=\"space-y-4 pt-2\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"jira-domain\">Jira domain</Label>\n            <Input\n              id=\"jira-domain\"\n              placeholder=\"your-site.atlassian.net\"\n              value={domain}\n              onChange={(e) => setDomain(e.target.value)}\n            />\n          </div>\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"jira-email\">Email</Label>\n            <Input\n              id=\"jira-email\"\n              type=\"email\"\n              placeholder=\"you@company.com\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n            />\n          </div>\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"jira-token\">API token</Label>\n            <Input\n              id=\"jira-token\"\n              type=\"password\"\n              placeholder=\"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢\"\n              value={apiToken}\n              onChange={(e) => setApiToken(e.target.value)}\n            />\n          </div>\n          {error && <p className=\"text-sm text-destructive\">{error}</p>}\n          <Button\n            onClick={handleSave}\n            disabled={saving}\n            className=\"w-full tofu-gradient text-primary-foreground hover:opacity-90\"\n          >\n            {saving ? \"Savingâ€¦\" : \"Save\"}\n          </Button>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAOA;AACA;AACA;AAZA;;;;;;;AAoBe,SAAS,gBAAgB,EAAE,IAAI,EAAE,YAAY,EAAE,OAAO,EAAwB;IAC3F,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAClD,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IAErC,MAAM,aAAa;QACjB,SAAS;QACT,MAAM,IAAI,OAAO,IAAI,GAAG,OAAO,CAAC,gBAAgB,IAAI,OAAO,CAAC,OAAO;QACnE,IAAI,CAAC,KAAK,CAAC,MAAM,IAAI,MAAM,CAAC,SAAS,IAAI,IAAI;YAC3C,SAAS;YACT;QACF;QACA,UAAU;QACV,IAAI;YACF,MAAM,EAAE,cAAc,EAAE,GAAG;YAC3B,MAAM,eAAe,GAAG,MAAM,IAAI,IAAI,SAAS,IAAI;YACnD;YACA,aAAa;YACb,UAAU;YACV,SAAS;YACT,YAAY;QACd,EAAE,OAAO,GAAG;YACV,SAAS,aAAa,QAAQ,EAAE,OAAO,GAAG;QAC5C,SAAU;YACR,UAAU;QACZ;IACF;IAEA,qBACE,8OAAC,4IAAM;QAAC,MAAM;QAAM,cAAc;kBAChC,cAAA,8OAAC,mJAAa;YAAC,WAAU;;8BACvB,8OAAC,kJAAY;;sCACX,8OAAC,iJAAW;sCAAC;;;;;;sCACb,8OAAC,uJAAiB;;gCAAC;gCACkE;8CACnF,8OAAC;oCACC,MAAK;oCACL,QAAO;oCACP,KAAI;oCACJ,WAAU;8CACX;;;;;;gCAEG;;;;;;;;;;;;;8BAIR,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,0IAAK;oCAAC,SAAQ;8CAAc;;;;;;8CAC7B,8OAAC,0IAAK;oCACJ,IAAG;oCACH,aAAY;oCACZ,OAAO;oCACP,UAAU,CAAC,IAAM,UAAU,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;sCAG7C,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,0IAAK;oCAAC,SAAQ;8CAAa;;;;;;8CAC5B,8OAAC,0IAAK;oCACJ,IAAG;oCACH,MAAK;oCACL,aAAY;oCACZ,OAAO;oCACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;sCAG5C,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,0IAAK;oCAAC,SAAQ;8CAAa;;;;;;8CAC5B,8OAAC,0IAAK;oCACJ,IAAG;oCACH,MAAK;oCACL,aAAY;oCACZ,OAAO;oCACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;wBAG9C,uBAAS,8OAAC;4BAAE,WAAU;sCAA4B;;;;;;sCACnD,8OAAC,4IAAM;4BACL,SAAS;4BACT,UAAU;4BACV,WAAU;sCAET,SAAS,YAAY;;;;;;;;;;;;;;;;;;;;;;;AAMlC"}},
    {"offset": {"line": 1974, "column": 0}, "map": {"version":3,"sources":["file:///Users/redbar/Documents/GitHub/TofuOS/src/components/CreateJiraModal.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n} from \"@/components/ui/dialog\";\nimport { Label } from \"@/components/ui/label\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { createJiraIssue } from \"@/lib/api\";\n\ninterface CreateJiraModalProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  insight: string;\n  initialProjectKey?: string;\n  onCreated?: (url: string, projectKey: string) => void;\n}\n\nexport default function CreateJiraModal({\n  open,\n  onOpenChange,\n  insight,\n  initialProjectKey = \"\",\n  onCreated,\n}: CreateJiraModalProps) {\n  const [summary, setSummary] = useState(insight);\n  const [description, setDescription] = useState(insight);\n  const [projectKey, setProjectKey] = useState(initialProjectKey);\n  const [issueType, setIssueType] = useState(\"Task\");\n  const [error, setError] = useState<string | null>(null);\n  const [creating, setCreating] = useState(false);\n  const [createdUrl, setCreatedUrl] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (open) {\n      setSummary(insight);\n      setDescription(insight);\n      setProjectKey(initialProjectKey);\n      setCreatedUrl(null);\n    }\n  }, [open, insight, initialProjectKey]);\n\n  const reset = () => {\n    setSummary(insight);\n    setDescription(insight);\n    setProjectKey(\"\");\n    setIssueType(\"Task\");\n    setError(null);\n    setCreatedUrl(null);\n  };\n\n  const handleOpenChange = (next: boolean) => {\n    if (!next) reset();\n    onOpenChange(next);\n  };\n\n  const handleCreate = async () => {\n    setError(null);\n    if (!summary.trim()) {\n      setError(\"Summary is required.\");\n      return;\n    }\n    if (!projectKey.trim()) {\n      setError(\"Project key is required (e.g. KAN).\");\n      return;\n    }\n    setCreating(true);\n    try {\n      const result = await createJiraIssue({\n        summary: summary.trim(),\n        description: description.trim() || summary.trim(),\n        projectKey: projectKey.trim(),\n        issueType: issueType.trim() || undefined,\n      });\n      setCreatedUrl(result.url);\n      onCreated?.(result.url, projectKey.trim());\n    } catch (e) {\n      setError(e instanceof Error ? e.message : \"Failed to create issue\");\n    } finally {\n      setCreating(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={handleOpenChange}>\n      <DialogContent className=\"sm:max-w-md\">\n        <DialogHeader>\n          <DialogTitle>Create Jira ticket</DialogTitle>\n          <DialogDescription>\n            Create a Jira issue from this insight. Edit summary and optional fields below.\n          </DialogDescription>\n        </DialogHeader>\n        <div className=\"space-y-4 pt-2\">\n          {createdUrl ? (\n            <div className=\"space-y-2\">\n              <p className=\"text-sm text-foreground\">Ticket created.</p>\n              <a\n                href={createdUrl}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"text-sm text-primary underline\"\n              >\n                Open in Jira\n              </a>\n              <div className=\"flex gap-2 pt-2\">\n                <Button variant=\"outline\" onClick={() => handleOpenChange(false)}>\n                  Close\n                </Button>\n              </div>\n            </div>\n          ) : (\n            <>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"jira-summary\">Summary</Label>\n                <Input\n                  id=\"jira-summary\"\n                  value={summary}\n                  onChange={(e) => setSummary(e.target.value)}\n                  placeholder=\"Issue summary\"\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"jira-description\">Description (optional)</Label>\n                <Input\n                  id=\"jira-description\"\n                  value={description}\n                  onChange={(e) => setDescription(e.target.value)}\n                  placeholder=\"Issue description\"\n                />\n              </div>\n              <div className=\"grid grid-cols-2 gap-2\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"jira-project\">Project key</Label>\n                  <Input\n                    id=\"jira-project\"\n                    value={projectKey}\n                    onChange={(e) => setProjectKey(e.target.value)}\n                    placeholder=\"e.g. PROJ\"\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"jira-type\">Issue type</Label>\n                  <Input\n                    id=\"jira-type\"\n                    value={issueType}\n                    onChange={(e) => setIssueType(e.target.value)}\n                    placeholder=\"Task\"\n                  />\n                </div>\n              </div>\n              {error && <p className=\"text-sm text-destructive\">{error}</p>}\n              <Button\n                onClick={handleCreate}\n                disabled={creating}\n                className=\"w-full tofu-gradient text-primary-foreground hover:opacity-90\"\n              >\n                {creating ? \"Creatingâ€¦\" : \"Create issue\"}\n              </Button>\n            </>\n          )}\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2284, "column": 0}, "map": {"version":3,"sources":["file:///Users/redbar/Documents/GitHub/TofuOS/src/components/ChatPanel.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from \"react\";\nimport { Send, ThumbsUp, ThumbsDown, Copy, Pin, SlidersHorizontal, MoreVertical, Sparkles, ExternalLink } from \"lucide-react\";\nimport { fetchSources, analyzeSources, getJiraConfig, chatWithAI } from \"@/lib/api\";\nimport JiraConfigModal from \"@/components/JiraConfigModal\";\nimport CreateJiraModal from \"@/components/CreateJiraModal\";\n\ninterface Message {\n  role: \"user\" | \"assistant\";\n  content: string;\n}\n\nconst suggestions = [\n  \"What should we build next based on customer feedback?\",\n  \"Create a PRD for the most requested feature.\",\n  \"Which pain points appear most frequently in the interviews?\",\n];\n\nconst ChatPanel = () => {\n  const [messages, setMessages] = useState<Message[]>([\n    {\n      role: \"assistant\",\n      content:\n        \"Based on the **47 customer interviews** and usage data, I've summarized the key insights:\\n\\n**Top Pain Points:**\\n- 73% of users report difficulties with **feature prioritization**\\n- Missing connection between **customer feedback** and **development planning**\\n- Manual synthesis of interviews takes an average of **12 hours per sprint**\\n\\n**Recommended Next Steps:**\\n1. Implement automatic feedback categorization\\n2. Calculate impact score based on user frequency\\n3. Direct integration with the development backlog\",\n    },\n  ]);\n  const [input, setInput] = useState(\"\");\n  const [insights, setInsights] = useState<string[]>([]);\n  const [analyzing, setAnalyzing] = useState(false);\n  const [analyzeError, setAnalyzeError] = useState<string | null>(null);\n  const [jiraConfigured, setJiraConfigured] = useState(false);\n  const [jiraConfigModalOpen, setJiraConfigModalOpen] = useState(false);\n  const [createJiraModalOpen, setCreateJiraModalOpen] = useState(false);\n  const [createJiraInsight, setCreateJiraInsight] = useState(\"\");\n  const [lastProjectKey, setLastProjectKey] = useState(\"\");\n\n  useEffect(() => {\n    getJiraConfig().then((c) => {\n      setJiraConfigured(!!c?.configured);\n      if (c?.lastProjectKey) setLastProjectKey(c.lastProjectKey);\n    });\n  }, []);\n\n  const handleAnalyze = async () => {\n    setAnalyzeError(null);\n    setAnalyzing(true);\n    try {\n      const sources = await fetchSources();\n      const selectedIds = sources.filter((s) => s.selected).map((s) => s.id);\n      if (selectedIds.length === 0) {\n        setAnalyzeError(\"Select at least one source in the left panel.\");\n        return;\n      }\n      const { insights: list } = await analyzeSources(selectedIds);\n      setInsights(list || []);\n    } catch (e) {\n      setAnalyzeError(e instanceof Error ? e.message : \"Analysis failed\");\n      setInsights([]);\n    } finally {\n      setAnalyzing(false);\n    }\n  };\n\n  const handleCreateJiraClick = (insight: string) => {\n    if (!jiraConfigured) {\n      setJiraConfigModalOpen(true);\n      setCreateJiraInsight(insight);\n    } else {\n      setCreateJiraInsight(insight);\n      setCreateJiraModalOpen(true);\n    }\n  };\n\n  const handleJiraConfigSaved = () => {\n    getJiraConfig().then((c) => {\n      setJiraConfigured(!!c?.configured);\n      if (c?.lastProjectKey) setLastProjectKey(c.lastProjectKey);\n    });\n    if (createJiraInsight) {\n      setCreateJiraModalOpen(true);\n    }\n  };\n\n  const handleSend = async () => {\n    if (!input.trim()) return;\n    \n    const userMessage = input;\n    setInput(\"\");\n    \n    const newMessages: Message[] = [\n      ...messages,\n      { role: \"user\", content: userMessage }\n    ];\n    \n    setMessages([\n      ...newMessages,\n      { role: \"assistant\", content: \"Thinking...\" }\n    ]);\n\n    try {\n      const sources = await fetchSources();\n      const selectedIds = sources.filter((s) => s.selected).map((s) => s.id);\n      \n      const response = await chatWithAI(userMessage, selectedIds, messages);\n      \n      setMessages([\n        ...newMessages,\n        { role: \"assistant\", content: response.content }\n      ]);\n    } catch (e) {\n      setMessages([\n        ...newMessages,\n        { role: \"assistant\", content: \"Sorry, I encountered an error. Please check your connection and Gemini API key.\" }\n      ]);\n    }\n  };\n\n  const renderContent = (text: string) => {\n    // Simple bold markdown rendering\n    const parts = text.split(/(\\*\\*[^*]+\\*\\*)/g);\n    return parts.map((part, i) => {\n      if (part.startsWith(\"**\") && part.endsWith(\"**\")) {\n        return <strong key={i} className=\"font-semibold text-foreground\">{part.slice(2, -2)}</strong>;\n      }\n      return <span key={i}>{part}</span>;\n    });\n  };\n\n  return (\n    <main className=\"flex-1 flex flex-col min-w-0 panel-bg\">\n      {/* Header */}\n      <div className=\"px-6 py-3 border-b border-border flex items-center justify-between\">\n        <h2 className=\"text-sm font-semibold text-foreground\">Chat</h2>\n        <div className=\"flex items-center gap-1\">\n          <button\n            onClick={handleAnalyze}\n            disabled={analyzing}\n            className=\"flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-medium tofu-gradient text-primary-foreground hover:opacity-90 transition-opacity disabled:opacity-70\"\n          >\n            <Sparkles className=\"w-4 h-4\" />\n            {analyzing ? \"Analyzingâ€¦\" : \"Analyze sources\"}\n          </button>\n          <button className=\"p-2 rounded-lg hover:bg-muted transition-colors\">\n            <SlidersHorizontal className=\"w-4 h-4 text-muted-foreground\" />\n          </button>\n          <button className=\"p-2 rounded-lg hover:bg-muted transition-colors\">\n            <MoreVertical className=\"w-4 h-4 text-muted-foreground\" />\n          </button>\n        </div>\n      </div>\n\n      {/* Insights list (PM analysis) */}\n      {insights.length > 0 && (\n        <div className=\"px-6 py-4 border-b border-border bg-muted/30\">\n          <h3 className=\"text-sm font-medium text-foreground mb-3\">Insights (project manager)</h3>\n          <ul className=\"space-y-2\">\n            {insights.map((insight, i) => (\n              <li\n                key={i}\n                className=\"flex items-start gap-2 text-sm text-foreground bg-background border border-border rounded-lg px-3 py-2\"\n              >\n                <span className=\"flex-1 min-w-0\">{insight}</span>\n                <button\n                  type=\"button\"\n                  onClick={() => handleCreateJiraClick(insight)}\n                  className=\"flex items-center gap-1.5 shrink-0 px-2.5 py-1 rounded-md text-xs font-medium bg-primary/10 text-primary hover:bg-primary/20 transition-colors\"\n                >\n                  <ExternalLink className=\"w-3.5 h-3.5\" />\n                  Create Jira ticket\n                </button>\n              </li>\n            ))}\n          </ul>\n        </div>\n      )}\n      {analyzeError && (\n        <div className=\"px-6 py-2 text-sm text-destructive\">{analyzeError}</div>\n      )}\n\n      {/* Messages */}\n      <div className=\"flex-1 overflow-y-auto px-6 py-6 space-y-6\">\n        {messages.map((msg, i) => (\n          <div key={i}>\n            {msg.role === \"assistant\" ? (\n              <div className=\"space-y-3\">\n                <div className=\"text-sm leading-relaxed text-foreground whitespace-pre-line\">\n                  {renderContent(msg.content)}\n                </div>\n                <div className=\"flex items-center gap-1 pt-1\">\n                  <button className=\"p-1.5 rounded hover:bg-muted transition-colors\" title=\"Save to Note\">\n                    <Pin className=\"w-3.5 h-3.5 text-muted-foreground\" />\n                  </button>\n                  <button className=\"p-1.5 rounded hover:bg-muted transition-colors\" title=\"Copy\">\n                    <Copy className=\"w-3.5 h-3.5 text-muted-foreground\" />\n                  </button>\n                  <button className=\"p-1.5 rounded hover:bg-muted transition-colors\">\n                    <ThumbsUp className=\"w-3.5 h-3.5 text-muted-foreground\" />\n                  </button>\n                  <button className=\"p-1.5 rounded hover:bg-muted transition-colors\">\n                    <ThumbsDown className=\"w-3.5 h-3.5 text-muted-foreground\" />\n                  </button>\n                </div>\n              </div>\n            ) : (\n              <div className=\"flex justify-end\">\n                <div className=\"tofu-gradient text-primary-foreground px-4 py-2.5 rounded-2xl rounded-br-md text-sm max-w-md\">\n                  {msg.content}\n                </div>\n              </div>\n            )}\n          </div>\n        ))}\n\n        {/* Suggestions */}\n        <div className=\"space-y-2 pt-2\">\n          {suggestions.map((s, i) => (\n            <button\n              key={i}\n              onClick={() => {\n                setInput(s);\n              }}\n              className=\"block w-fit text-left text-sm px-4 py-2.5 suggestion-bg rounded-xl suggestion-hover transition-colors text-foreground border border-border\"\n            >\n              {s}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Input */}\n      <div className=\"p-4 border-t border-border bg-background\">\n        <div className=\"flex items-center gap-2 chat-input-bg border border-border rounded-xl px-4 py-2 focus-within:ring-2 focus-within:ring-ring transition-shadow mb-safe\">\n          <input\n            type=\"text\"\n            placeholder=\"Type a message...\"\n            value={input}\n            onChange={(e) => setInput(e.target.value)}\n            onKeyDown={(e) => e.key === \"Enter\" && handleSend()}\n            className=\"flex-1 bg-transparent text-sm outline-none text-foreground placeholder:text-muted-foreground\"\n          />\n          <span className=\"text-xs text-muted-foreground whitespace-nowrap\">\n            3 Sources\n          </span>\n          <button\n            onClick={handleSend}\n            className=\"p-1.5 rounded-lg tofu-gradient text-primary-foreground hover:opacity-90 transition-opacity\"\n          >\n            <Send className=\"w-4 h-4\" />\n          </button>\n        </div>\n        <p className=\"text-[11px] text-muted-foreground text-center mt-2\">\n          tofuOS can make mistakes. Please verify the responses.\n        </p>\n      </div>\n\n      <JiraConfigModal\n        open={jiraConfigModalOpen}\n        onOpenChange={setJiraConfigModalOpen}\n        onSaved={handleJiraConfigSaved}\n      />\n      <CreateJiraModal\n        open={createJiraModalOpen}\n        onOpenChange={setCreateJiraModalOpen}\n        insight={createJiraInsight}\n        initialProjectKey={lastProjectKey}\n        onCreated={(url, key) => {\n          setLastProjectKey(key);\n        }}\n      />\n    </main>\n  );\n};\n\nexport default ChatPanel;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2805, "column": 0}, "map": {"version":3,"sources":["file:///Users/redbar/Documents/GitHub/TofuOS/src/components/StudioPanel.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from \"react\";\nimport {\n  FileText,\n  Code,\n  BookOpen,\n  CheckSquare,\n  LayoutDashboard,\n  Bug,\n  BarChart3,\n  Users,\n  Database,\n  Rocket,\n  Map,\n  Pencil,\n  Sparkles,\n} from \"lucide-react\";\n\ninterface StudioItem {\n  id: string;\n  label: string;\n  icon: React.ReactNode;\n  color: string;\n}\n\nconst studioItems: StudioItem[] = [\n  { id: \"prd\", label: \"PRD\", icon: <FileText className=\"w-4 h-4\" />, color: \"text-primary\" },\n  { id: \"coding-rules\", label: \"AI Coding Rules & Standards\", icon: <Code className=\"w-4 h-4\" />, color: \"text-tofu-warm\" },\n  { id: \"api-docs\", label: \"API Documentation\", icon: <BookOpen className=\"w-4 h-4\" />, color: \"text-primary\" },\n  { id: \"accessibility\", label: \"Accessibility Compliance\", icon: <CheckSquare className=\"w-4 h-4\" />, color: \"text-tofu-warm\" },\n  { id: \"architecture\", label: \"App Architecture Plan\", icon: <LayoutDashboard className=\"w-4 h-4\" />, color: \"text-primary\" },\n  { id: \"bug-fix\", label: \"Bug Investigation & Fix Plan\", icon: <Bug className=\"w-4 h-4\" />, color: \"text-destructive\" },\n  { id: \"competitive\", label: \"Competitive Analysis Report\", icon: <BarChart3 className=\"w-4 h-4\" />, color: \"text-tofu-warm\" },\n  { id: \"journey-map\", label: \"Customer Journey Map\", icon: <Users className=\"w-4 h-4\" />, color: \"text-primary\" },\n  { id: \"db-schema\", label: \"Database Schema Design\", icon: <Database className=\"w-4 h-4\" />, color: \"text-tofu-warm\" },\n  { id: \"feature-spec\", label: \"Feature Implementation Spec\", icon: <Rocket className=\"w-4 h-4\" />, color: \"text-primary\" },\n  { id: \"gtm\", label: \"Go-to-Market Plan\", icon: <Map className=\"w-4 h-4\" />, color: \"text-tofu-warm\" },\n];\n\nconst StudioPanel = ({ mobile }: { mobile?: boolean }) => {\n  const [activeItem, setActiveItem] = useState<string | null>(null);\n\n  return (\n    <aside className={`${mobile ? \"w-full h-full\" : \"w-80 min-w-[300px] border-l\"} border-border flex flex-col panel-bg`}>\n      <div className=\"p-4 border-b border-border flex items-center justify-between\">\n        <h2 className=\"text-sm font-semibold text-foreground\">Studio</h2>\n        <button className=\"p-1 rounded hover:bg-muted transition-colors\">\n          <svg className=\"w-4 h-4 text-muted-foreground\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\"><rect x=\"3\" y=\"3\" width=\"7\" height=\"7\"/><rect x=\"14\" y=\"3\" width=\"7\" height=\"7\"/><rect x=\"3\" y=\"14\" width=\"7\" height=\"7\"/><rect x=\"14\" y=\"14\" width=\"7\" height=\"7\"/></svg>\n        </button>\n      </div>\n\n      <div className=\"flex-1 overflow-y-auto p-3\">\n        <div className=\"grid grid-cols-2 gap-2\">\n          {studioItems.map((item) => (\n            <button\n              key={item.id}\n              onClick={() => setActiveItem(activeItem === item.id ? null : item.id)}\n              className={`flex items-center gap-2.5 p-3 rounded-xl text-left transition-all group ${\n                activeItem === item.id\n                  ? \"bg-primary/10 border border-primary/30\"\n                  : \"studio-card-bg studio-card-hover border border-transparent\"\n              }`}\n            >\n              <span className={item.color}>{item.icon}</span>\n              <span className=\"text-xs font-medium text-foreground leading-tight flex-1\">\n                {item.label}\n              </span>\n              <Pencil className=\"w-3 h-3 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0\" />\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Studio Output Area */}\n      <div className=\"p-4 border-t border-border bg-background pb-safe\">\n        <div className=\"flex flex-col items-center text-center py-6\">\n          <Sparkles className=\"w-6 h-6 text-primary mb-2\" />\n          <p className=\"text-sm font-medium text-primary\">\n            Studio output will be saved here.\n          </p>\n          <p className=\"text-xs text-muted-foreground mt-1 leading-relaxed\">\n            After adding sources, click to generate PRDs,\n            Feature Specs, and more.\n          </p>\n        </div>\n        <button className=\"w-full flex items-center justify-center gap-2 py-2.5 px-4 tofu-gradient text-primary-foreground rounded-xl text-sm font-medium hover:opacity-90 transition-opacity\">\n          <FileText className=\"w-4 h-4\" />\n          Create Document\n        </button>\n      </div>\n    </aside>\n  );\n};\n\nexport default StudioPanel;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3161, "column": 0}, "map": {"version":3,"sources":["file:///Users/redbar/Documents/GitHub/TofuOS/src/hooks/use-mobile.tsx"],"sourcesContent":["import * as React from \"react\";\n\nconst MOBILE_BREAKPOINT = 1024;\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined);\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`);\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT);\n    };\n    mql.addEventListener(\"change\", onChange);\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT);\n    return () => mql.removeEventListener(\"change\", onChange);\n  }, []);\n\n  return !!isMobile;\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,oBAAoB;AAEnB,SAAS;IACd,MAAM,CAAC,UAAU,YAAY,GAAG,iNAAc,CAAsB;IAEpE,kNAAe,CAAC;QACd,MAAM,MAAM,OAAO,UAAU,CAAC,CAAC,YAAY,EAAE,oBAAoB,EAAE,GAAG,CAAC;QACvE,MAAM,WAAW;YACf,YAAY,OAAO,UAAU,GAAG;QAClC;QACA,IAAI,gBAAgB,CAAC,UAAU;QAC/B,YAAY,OAAO,UAAU,GAAG;QAChC,OAAO,IAAM,IAAI,mBAAmB,CAAC,UAAU;IACjD,GAAG,EAAE;IAEL,OAAO,CAAC,CAAC;AACX"}},
    {"offset": {"line": 3185, "column": 0}, "map": {"version":3,"sources":["file:///Users/redbar/Documents/GitHub/TofuOS/src/pages/Index.tsx"],"sourcesContent":["'use client';\n\nimport TopBar from \"@/components/TopBar\";\nimport SourcesPanel from \"@/components/SourcesPanel\";\nimport ChatPanel from \"@/components/ChatPanel\";\nimport StudioPanel from \"@/components/StudioPanel\";\nimport { useState } from \"react\";\nimport { useIsMobile } from \"@/hooks/use-mobile\";\n\ntype MobileTab = \"sources\" | \"chat\" | \"studio\";\n\nconst Index = () => {\n  const isMobile = useIsMobile();\n  const [activeTab, setActiveTab] = useState<MobileTab>(\"chat\");\n\n  if (isMobile) {\n    return (\n      <div className=\"h-[100dvh] flex flex-col bg-background overflow-hidden\">\n        <TopBar />\n        {/* Tab bar */}\n        <div className=\"flex border-b border-border\">\n          {([\n            { key: \"sources\", label: \"Sources\" },\n            { key: \"chat\", label: \"Chat\" },\n            { key: \"studio\", label: \"Studio\" },\n          ] as const).map((tab) => (\n            <button\n              key={tab.key}\n              onClick={() => setActiveTab(tab.key)}\n              className={`flex-1 py-3 text-sm font-medium transition-colors relative ${\n                activeTab === tab.key\n                  ? \"text-foreground\"\n                  : \"text-muted-foreground\"\n              }`}\n            >\n              {tab.label}\n              {activeTab === tab.key && (\n                <span className=\"absolute bottom-0 left-1/2 -translate-x-1/2 w-12 h-0.5 bg-primary rounded-full\" />\n              )}\n            </button>\n          ))}\n        </div>\n        {/* Tab content */}\n        <div className=\"flex-1 min-h-0\">\n          {activeTab === \"sources\" && <SourcesPanel mobile />}\n          {activeTab === \"chat\" && <ChatPanel />}\n          {activeTab === \"studio\" && <StudioPanel mobile />}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"h-screen flex flex-col bg-background overflow-hidden\">\n      <TopBar />\n      <div className=\"flex flex-1 min-h-0\">\n        <SourcesPanel />\n        <ChatPanel />\n        <StudioPanel />\n      </div>\n    </div>\n  );\n};\n\nexport default Index;\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAPA;;;;;;;;AAWA,MAAM,QAAQ;IACZ,MAAM,WAAW,IAAA,6IAAW;IAC5B,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAY;IAEtD,IAAI,UAAU;QACZ,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC,uIAAM;;;;;8BAEP,8OAAC;oBAAI,WAAU;8BACZ,AAAC;wBACA;4BAAE,KAAK;4BAAW,OAAO;wBAAU;wBACnC;4BAAE,KAAK;4BAAQ,OAAO;wBAAO;wBAC7B;4BAAE,KAAK;4BAAU,OAAO;wBAAS;qBAClC,CAAW,GAAG,CAAC,CAAC,oBACf,8OAAC;4BAEC,SAAS,IAAM,aAAa,IAAI,GAAG;4BACnC,WAAW,CAAC,2DAA2D,EACrE,cAAc,IAAI,GAAG,GACjB,oBACA,yBACJ;;gCAED,IAAI,KAAK;gCACT,cAAc,IAAI,GAAG,kBACpB,8OAAC;oCAAK,WAAU;;;;;;;2BAVb,IAAI,GAAG;;;;;;;;;;8BAgBlB,8OAAC;oBAAI,WAAU;;wBACZ,cAAc,2BAAa,8OAAC,6IAAY;4BAAC,MAAM;;;;;;wBAC/C,cAAc,wBAAU,8OAAC,0IAAS;;;;;wBAClC,cAAc,0BAAY,8OAAC,4IAAW;4BAAC,MAAM;;;;;;;;;;;;;;;;;;IAItD;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,uIAAM;;;;;0BACP,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,6IAAY;;;;;kCACb,8OAAC,0IAAS;;;;;kCACV,8OAAC,4IAAW;;;;;;;;;;;;;;;;;AAIpB;uCAEe"}},
    {"offset": {"line": 3333, "column": 0}, "map": {"version":3,"sources":["file:///Users/redbar/Documents/GitHub/TofuOS/src/components/ProtectedRoute.tsx"],"sourcesContent":["'use client';\n\nimport { useRouter } from \"next/navigation\";\nimport { useAuth } from \"@/contexts/AuthContext\";\nimport { useEffect } from \"react\";\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode;\n}\n\n/**\n * Renders children only when the user is authenticated.\n * Redirects to /login otherwise.\n */\nconst ProtectedRoute = ({ children }: ProtectedRouteProps) => {\n  const { isAuthenticated, isLoading } = useAuth();\n  const router = useRouter();\n\n  useEffect(() => {\n    if (!isLoading && !isAuthenticated) {\n      router.push(\"/login\");\n    }\n  }, [isLoading, isAuthenticated, router]);\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-background\">\n        <div className=\"w-8 h-8 rounded-lg tofu-gradient animate-pulse\" />\n      </div>\n    );\n  }\n\n  if (!isAuthenticated) {\n    return null;\n  }\n\n  return <>{children}</>;\n};\n\nexport default ProtectedRoute;\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAUA;;;CAGC,GACD,MAAM,iBAAiB,CAAC,EAAE,QAAQ,EAAuB;IACvD,MAAM,EAAE,eAAe,EAAE,SAAS,EAAE,GAAG,IAAA,0IAAO;IAC9C,MAAM,SAAS,IAAA,+IAAS;IAExB,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,aAAa,CAAC,iBAAiB;YAClC,OAAO,IAAI,CAAC;QACd;IACF,GAAG;QAAC;QAAW;QAAiB;KAAO;IAEvC,IAAI,WAAW;QACb,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;;;;;;;;;;IAGrB;IAEA,IAAI,CAAC,iBAAiB;QACpB,OAAO;IACT;IAEA,qBAAO;kBAAG;;AACZ;uCAEe"}}]
}